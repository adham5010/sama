"use strict";(self.webpackChunkhollat_end_user_app=self.webpackChunkhollat_end_user_app||[]).push([[400],{9400:(fl,ie,g)=>{g.r(ie),g.d(ie,{SelfServiceModule:()=>ml});var R=g(4655),Ze=g(739),e=g(639),I=g(6074),D=g(9641),ne=g(9075),S=g(9790),$=g(1750),f=g(8583);function ye(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",3),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.facebookLink,e.LSH)}}function Ae(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",4),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.twitterLink,e.LSH)}}function we(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",5),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.instagramLink,e.LSH)}}function Le(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",6),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.linkedinLink,e.LSH)}}function Fe(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",7),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.tiktokLink,e.LSH)}}function Ie(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",8),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.youtubeLink,e.LSH)}}function Oe(n,l){if(1&n&&(e.TgZ(0,"a",2),e._UZ(1,"img",9),e.qZA()),2&n){const t=e.oxw();e.s9C("href",t.themeService.snapchatLink,e.LSH)}}let Ee=(()=>{class n{constructor(t,i){this.themeService=t,this.translateService=i,this.copyRights=""}ngOnInit(){this.copyRights="ar"===this.translateService.currentLang?this.themeService.copyRightsAR:this.themeService.copyRightsEN}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.f),e.Y36(S.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-footer"]],decls:11,vars:8,consts:[[1,"self-service-footer","d-flex","flex-column","justify-content-center","align-middle","main-themed"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],["src","assets/imgs/facebook.svg","alt","",1,"social-icon"],["src","assets/imgs/006-twitter.svg","alt","",1,"social-icon"],["src","assets/imgs/002-instagram.svg","alt","",1,"social-icon"],["src","assets/imgs/002-linkedin.svg","alt","",1,"social-icon"],["src","assets/imgs/003-tik-tok.svg","alt","",1,"social-icon"],["src","assets/imgs/004-youtube.svg","alt","",1,"social-icon"],["src","assets/imgs/005-snapchat.svg","alt","",1,"social-icon"]],template:function(t,i){1&t&&(e.TgZ(0,"footer",0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e.YNc(4,ye,2,1,"a",1),e.YNc(5,Ae,2,1,"a",1),e.YNc(6,we,2,1,"a",1),e.YNc(7,Le,2,1,"a",1),e.YNc(8,Fe,2,1,"a",1),e.YNc(9,Ie,2,1,"a",1),e.YNc(10,Oe,2,1,"a",1),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",i.copyRights," "),e.xp6(2),e.Q6J("ngIf",i.themeService.facebookLink),e.xp6(1),e.Q6J("ngIf",i.themeService.twitterLink),e.xp6(1),e.Q6J("ngIf",i.themeService.instagramLink),e.xp6(1),e.Q6J("ngIf",i.themeService.linkedinLink),e.xp6(1),e.Q6J("ngIf",i.themeService.tiktokLink),e.xp6(1),e.Q6J("ngIf",i.themeService.youtubeLink),e.xp6(1),e.Q6J("ngIf",i.themeService.snapchatLink))},directives:[f.O5],styles:[".self-service-footer[_ngcontent-%COMP%]{padding:16px;align-items:center;color:#fff}.social-icon[_ngcontent-%COMP%]{width:25px;margin:7px}"]}),n})();var a=g(3679);class Me{static StringOnlyValidation(l){return l.value?/^[a-zA-Z]+$/gm.test(l.value)?null:{stringOnly:!0}:null}static NumberOnlyValidation(l){return l.value?/\d+$/gm.test(l.value)?null:{numberOnly:!0}:null}static needOtherControlValid(l,t){var i;return(null===(i=l.get(t))||void 0===i?void 0:i.valid)?{[`${t}Required`]:!0}:null}}var J=g(5554),C=g(8002),b=g(7574),U=g(7373),oe=g(9839),A=g(3013),G=g(1808),E=g(9140),M=g(8939),le=g(5257),se=g(945),y=g(5917),Q=g(3427),B=g(5121);function Ne(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().getOtpCode()}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.isLoading),e.xp6(2),e.Oqu(e.lcZ(3,2,"GLOBAL.OTB_Send"))}}function qe(n,l){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"code_will_expire_after")," ",t.countDown," ",e.lcZ(3,5,"second")," ")}}function De(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.validate")))}function Je(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._UZ(2,"input",12),e.qZA(),e.TgZ(3,"div",13),e.TgZ(4,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().verifyOtp()}),e.YNc(5,De,3,3,"span",15),e._UZ(6,"hollat-spinner",16),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("disabled",!(null!=(i=t.getControl("otp_code"))&&i.value)),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("showSpinner",t.isLoading)}}const Ue=function(){return{width:"50vw"}};let Qe=(()=>{class n{constructor(t,i,o,s){this.otpService=t,this.themeService=i,this.toastMessageService=o,this.ref=s,this.isLoading=!1,this.inputType=J.n,this.showDialog=!1,this.mobile=0,this.form=new a.cw({mobile_number:new a.NI(null),otp_code:new a.NI(null)}),this.timerInterval$=(0,se.F)(1e3),this.times=60*Number(this.themeService.OTPExpirationTime),this.countDown=null,this.mobileVerified=!1,this.mobileForm=new e.vpe}ngOnChanges(t){var i,o,s;(null===(i=t.mobile)||void 0===i?void 0:i.currentValue)&&(null===(o=this.form.get("mobile_number"))||void 0===o||o.setValue(t.mobile.currentValue)),(null===(s=t.showDialog)||void 0===s?void 0:s.currentValue)?this.getOtpCode():(this.countDown=!1,this.subscribers&&this.subscribers.unsubscribe())}ngOnInit(){var t;null===(t=this.form.get("mobile_number"))||void 0===t||t.setValue(this.mobile)}getOtpCode(){var t;this.isLoading=!0,this.otpService.sendOtp({mobile_number:null===(t=this.form.get("mobile_number"))||void 0===t?void 0:t.value,section:"follow-up"}).pipe((0,C.U)(i=>i.data),(0,M.x)(()=>{this.isLoading=!1})).subscribe(()=>{this.subscribers=this.timerInterval$.pipe((0,le.q)(this.times)).subscribe(i=>{this.countDown=this.times-i,1===this.countDown&&(this.countDown=null),this.ref.detectChanges()})},i=>{this.isLoading=!1,this.showDialog=!1,this.ref.detectChanges(),this.countDown=null,this.toastMessageService.showErrorMessage("",i.error.message?i.error:i.error.errors[0])})}verifyOtp(){this.isLoading=!0,this.otpService.verifyOtp(this.form.value).pipe((0,C.U)(t=>t),(0,M.x)(()=>{this.isLoading=!1})).subscribe(t=>{var i;this.mobileVerified=!0,localStorage.setItem("auth",t.auth),this.otpService.userInfo.next(t.data),this.showDialog=!1,this.otpService.OTBUserActivated.next(null===(i=this.form.get("mobile_number"))||void 0===i?void 0:i.value),this.toastMessageService.showSuccessMessage("Mobile_Verified")},t=>{var i;return this.isLoading=!1,null===(i=this.form.get("otp_code"))||void 0===i||i.patchValue(""),this.toastMessageService.showErrorMessage("error",t.error.errors[0]),(0,y.of)(t)})}emitForm(){if(this.showDialog=!1,this.mobileVerified){let t=this.form.value;t.mobileVerified=!0,this.mobileForm.emit(t)}else this.mobileForm.emit(null)}getControl(t){return this.form.get(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D.j),e.Y36(I.f),e.Y36(Q.D),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-otp-verify"]],inputs:{showDialog:"showDialog",mobile:"mobile"},outputs:{mobileForm:"mobileForm"},features:[e.TTD],decls:11,vars:14,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup"],[1,"col-md-12"],["for","mobile_number"],["readonly","","id","mobile_number","formControlName","mobile_number",1,"form-control"],["type","button","class","btn btn-success main-themed float-start mt-1",3,"disabled","click",4,"ngIf"],["class","row p-2",4,"ngIf"],["class","row d-flex justify-content-center align-items-center","style","clear: both",4,"ngIf"],["type","button",1,"btn","btn-success","main-themed","float-start","mt-1",3,"disabled","click"],[1,"row","p-2"],[1,"row","d-flex","justify-content-center","align-items-center",2,"clear","both"],[1,"col-8"],["placeholder","X X X X","id","otp_code","formControlName","otp_code",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","w-100","btn-success","float-start","main-themed","mt-1",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return i.showDialog=s})("onHide",function(){return i.emitForm()}),e.ALo(1,"translate"),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e.TgZ(4,"label",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.YNc(8,Ne,4,4,"button",5),e.YNc(9,qe,4,7,"div",6),e.YNc(10,Je,7,3,"div",7),e.qZA(),e.qZA()),2&t&&(e.Akn(e.DdM(13,Ue)),e.s9C("header",e.lcZ(1,9,"GLOBAL.otp")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(3),e.hij(" ",e.lcZ(6,11,"GLOBAL.PHONE_NUMBER"),""),e.xp6(3),e.Q6J("ngIf",!i.countDown),e.xp6(1),e.Q6J("ngIf",i.countDown&&!i.mobileVerified),e.xp6(1),e.Q6J("ngIf",i.countDown&&!i.mobileVerified))},directives:[B.V,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,f.O5,E.P],pipes:[S.X$],styles:[""]}),n})();var P=g(5802),ae=g(9870),Ve=g(1482);function Re(n,l){if(1&n&&(e.TgZ(0,"ul"),e.TgZ(1,"li",3),e.TgZ(2,"a",38),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("href",t.mainSite,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(4,2,"BackToMainSite")," ")}}function Be(n,l){if(1&n&&(e.TgZ(0,"span",39),e._UZ(1,"img",40),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.getSmallImage,e.LSH)}}function Pe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().openUserData()}),e._UZ(2,"img",43),e.qZA(),e.TgZ(3,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().logout()}),e._UZ(4,"img",44),e.qZA(),e.qZA()}}const re=function(n){return{field:n}};function Ye(n,l){1&n&&(e.TgZ(0,"div",45),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,re,e.lcZ(3,4,"GLOBAL.TICKET_NUMBER")))," "))}function He(n,l){1&n&&(e.TgZ(0,"div",45),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.NUMBER_ONLY",e.VKq(6,re,e.lcZ(3,4,"GLOBAL.TICKET_NUMBER")))," "))}function $e(n,l){if(1&n&&(e.TgZ(0,"div",46),e._UZ(1,"hollat-generic-input",47),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("resetField",t.resetMobileForm)("mobileValue",t.mobileValue)("disabled",t.mobileVerified)("control",t.phoneNoFormControl)("label","GLOBAL.PHONE_NUMBER")("inputId","phoneNo")("inputType",t.inputType.PHONE)("requiredPattern","5XXXXXXXX")}}function Ge(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.Follow_Ticket")))}function je(n,l){1&n&&(e.TgZ(0,"h5"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"User_Profile")))}function Ke(n,l){if(1&n&&e._UZ(0,"hollat-generic-input",61),2&n){const t=e.oxw(2);e.Q6J("label","GLOBAL.NAME")("inputId","ClientName")("inputType",t.inputType.TEXT)("control",t.getControl("name"))}}function ze(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.NAME")))}function Xe(n,l){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.getControl("name").value)}}function We(n,l){if(1&n&&(e._UZ(0,"islamic-calendar",63),e.ALo(1,"translate")),2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"GLOBAL.BIRTHDATE")),e.Q6J("hijri",!1)("formControl",t.getControl("birthdate"))}}function et(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.BIRTHDATE")))}function tt(n,l){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.getControl("birthdate").value)}}function it(n,l){if(1&n&&e._UZ(0,"phone-input",64),2&n){const t=e.oxw(2);e.Q6J("parentForm",t.profileForm)("fieldName","mobile")("label","GLOBAL.PHONE_NUMBER")("disabled",t.mobileVerified)("formControl",t.getControl("mobile"))}}function nt(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.PHONE_NUMBER")))}function ot(n,l){if(1&n&&(e.TgZ(0,"div",62),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.getControl("mobile").value)}}function lt(n,l){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label","GLOBAL.COUNTRY")("inputId","countryId")("inputType",t.inputType.SELECT)("control",t.getControl("country_id"))("sourceObs$",t.countries$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function st(n,l){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label","GLOBAL.REGION")("inputId","regionId")("inputType",t.inputType.SELECT)("control",t.getControl("region_id"))("sourceObs$",t.regions$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function at(n,l){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"hollat-generic-input",65),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("label","GLOBAL.CITY")("inputId","cityId")("inputType",t.inputType.SELECT)("control",t.getControl("city_id"))("sourceObs$",t.cities$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function rt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",70),e.TgZ(1,"div",21),e.TgZ(2,"div",71),e._UZ(3,"img",72),e.qZA(),e.TgZ(4,"div",73),e.TgZ(5,"a",74),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).reloadCapatcha()}),e._UZ(6,"i",75),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.capatchaResponse,e.LSH)("alt",t.capatchaResponse)}}const ct=function(){return{standalone:!0}};function dt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",66),e.TgZ(1,"div",21),e.TgZ(2,"div",67),e.TgZ(3,"input",68),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).capatchaCode=o}),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,rt,7,2,"div",69),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.s9C("placeholder",e.lcZ(4,4,"CAPATCHA_CODE")),e.Q6J("ngModel",t.capatchaCode)("ngModelOptions",e.DdM(6,ct)),e.xp6(2),e.Q6J("ngIf",t.capatchaResponse)}}function _t(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form",48),e.TgZ(1,"div",21),e.TgZ(2,"div",49),e.YNc(3,Ke,1,4,"hollat-generic-input",50),e.YNc(4,ze,3,3,"div",6),e.YNc(5,Xe,2,1,"div",51),e.qZA(),e.TgZ(6,"div",49),e.YNc(7,We,2,5,"islamic-calendar",52),e.YNc(8,et,3,3,"div",6),e.YNc(9,tt,2,1,"div",51),e.qZA(),e.TgZ(10,"div",49),e._UZ(11,"hollat-generic-input",53),e.qZA(),e.TgZ(12,"div",49),e.YNc(13,it,1,5,"phone-input",54),e.YNc(14,nt,3,3,"div",6),e.YNc(15,ot,2,1,"div",51),e.qZA(),e.YNc(16,lt,2,7,"div",55),e.YNc(17,st,2,7,"div",55),e.YNc(18,at,2,7,"div",55),e.TgZ(19,"div",56),e.YNc(20,dt,6,7,"div",57),e.qZA(),e.qZA(),e.TgZ(21,"div",58),e.TgZ(22,"span",59),e.TgZ(23,"button",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateProfile()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("mobileValue",t.profileMobile)("required",!1)("label","GLOBAL.EMAIL")("inputId","email")("inputType",t.inputType.TEXT)("control",t.getControl("email")),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(1),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED),e.xp6(2),e.Q6J("ngIf",!t.themeService.NAFATH_ENABLED&&t.capatchaResponse),e.xp6(4),e.hij(" ",e.lcZ(25,20,"GLOBAL.SEND")," ")}}function ut(n,l){}const pt=function(n){return{"background-image":n}},gt=function(){return["/"]},mt=function(){return{height:"55vh"}},ht=function(){return{"70vw":"75vw","80vw":"100vw"}};let ft=(()=>{class n{constructor(t,i,o,s,r,d,m,c,u,h,p,v){this.translateService=t,this.ticketService=i,this.themeService=o,this.lookupService=s,this.otpService=r,this.activatedRoute=d,this.router=m,this.messageService=c,this.ref=u,this.amplitudeService=h,this.chacheService=p,this.santianzer=v,this.inputType=J.n,this.showLoader=!1,this.resetSearch=!1,this.searchTickets=new e.vpe,this.resetTicketDetails=new e.vpe,this.updateOtpStatus=new e.vpe,this.showDialog=!1,this.OTP_Enabled=!1,this.mobileVerified=!1,this.mobileValue="",this.mainSite="",this.Logo_2030=!1,this.resetMobileForm=!1,this.showProfile=!1,this.profileForm=new a.cw({name:new a.NI,country_id:new a.NI,region_id:new a.NI,city_id:new a.NI,mobile:new a.NI,birthdate:new a.NI,email:new a.NI}),this.profileMobile="",this.configs={},this.capatchaResponse="",this.capatchIdentificationCode="",this.capatchaCode="",this.countries$=new b.y,this.regions$=new b.y,this.cities$=new b.y,this.idTypes$=new b.y,this.nationalIdRequiredPattern="",this.nationalIdFieldType="",this.OTP_Enabled=this.themeService.OTPEnabled,this.themeService.selfServiceConfigs.subscribe(_=>{var x,T,k;this.configs=_,+(null===(k=null===(T=null===(x=this.configs)||void 0===x?void 0:x.LOGIN)||void 0===T?void 0:T.NAFATH_ENABLED)||void 0===k?void 0:k.value)||this.reloadCapatcha()}),r.loggedUser.subscribe(_=>{_&&(this.initLookups(),this.currentUser=_,this.otpService.userInfo.next(_),this.profileForm.patchValue(_),this.mobileValue=_.mobile)}),this.searchForm=new a.cw({ticket_id:new a.NI("",[a.kI.required,Me.NumberOnlyValidation]),mobile_number:new a.NI("",this.currentUser?[]:[a.kI.required])})}reloadCapatcha(){+this.themeService.NAFATH_ENABLED||this.otpService.createCaptcha().subscribe(t=>{this.capatchaResponse=this.santianzer.bypassSecurityTrustResourceUrl(t.img),this.capatchIdentificationCode=t.key,this.capatchaCode=""})}ngAfterViewInit(){const{ticket:t,mobile:i}=this.activatedRoute.snapshot.queryParams;t&&i&&(this.mobileValue=i,this.searchForm.patchValue({ticket_id:t,mobile_number:i}),this.searchTickets.emit(this.searchForm.value),setTimeout(()=>{this.searchForm.patchValue({ticket_id:t,mobile_number:i})},1e3))}get ticketNoFormControl(){return this.searchForm.get("ticket_id")}get phoneNoFormControl(){return this.searchForm.get("mobile_number")}get switchToLang(){return"ar"===this.translateService.currentLang?"English":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"}ngOnInit(){var t;this.mainSite=this.themeService.selfService_Main_site,this.Logo_2030=null!==(t=this.themeService.selfService_Small_Image)&&void 0!==t&&t,this.ticketNoFormControl.valueChanges.subscribe(i=>{isNaN(Number(i))||this.ticketNoFormControl.setErrors(null)})}ngOnChanges(t){t.resetSearch&&t.resetSearch.currentValue&&t.resetSearch.currentValue&&(this.searchForm.reset(),this.resetSearch=!1),t.searchCriteria&&t.searchCriteria.currentValue&&(this.mobileValue=t.searchCriteria.currentValue.mobile_number,this.searchForm.patchValue(t.searchCriteria.currentValue)),this.otpService.OTBUserActivated.subscribe(i=>{var o;i&&(this.mobileVerified=!0,this.mobileValue=i,null===(o=this.searchForm.get("mobile_number"))||void 0===o||o.setValue(i),this.ref.detectChanges())})}changeLang(){const t=this.translateService.currentLang;localStorage.setItem("lang","ar"===t?"en":"ar"),this.translateService.use("ar"===t?"en":"ar")}search(){this.amplitudeService.logEvent("SELF_SERVICE_SEARCH_FOR_TICKET",{ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number}),this.OTP_Enabled?this.mobileVerified?this.searchTickets.emit({ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number}):this.showDialog=!0:this.searchTickets.emit({ticket_id:this.searchForm.value.ticket_id,mobile_number:this.searchForm.value.mobile_number})}reset(){var t,i,o;this.mobileVerified?null===(o=this.searchForm.get("ticket_id"))||void 0===o||o.setValue(null):(this.mobileValue=null,this.resetMobileForm=!0,this.searchForm.reset(),null===(t=this.searchForm.get("ticket_id"))||void 0===t||t.setErrors({required:!0}),null===(i=this.searchForm.get("ticket_id"))||void 0===i||i.markAsUntouched(),this.searchForm.updateValueAndValidity(),setTimeout(()=>{this.resetMobileForm=!1},1e3)),this.resetTicketDetails.emit(!0)}getData(t){t&&t.mobileVerified?(this.mobileVerified=!0,this.search(),this.updateOtpStatus.emit(t)):this.showDialog=!1}get headerBackgroundImage(){return this.themeService.backGroundImage}get logoImage(){return this.themeService.logoImage}get getSmallImage(){return this.themeService.SMALL_IMAGE||null}logout(){var t;localStorage.removeItem("otp_token"),localStorage.removeItem("userData"),this.otpService.loggedUser.next(null),this.otpService.logout().subscribe(),(null===(t=this.themeService)||void 0===t?void 0:t.NAFATH_ENABLED)?this.router.navigate(["/","iamlogin"]):this.router.navigate(["/","login"]),this.amplitudeService.logEvent("SELF_SERVICE_LOGOUT"),this.otpService.logOut().subscribe(()=>{})}shiwOtpPopUp(){}openUserData(){const t=this.chacheService.getItem("userData");this.profileForm.patchValue(t),this.showProfile=!0,this.amplitudeService.logEvent("SELF_SERVICE_SHOW_USER_PROFILE")}getControl(t){return this.profileForm.get(t)}get currentLang(){return this.translateService.currentLang}getSelectLabel(t){return`${t}${this.currentLang}`}initLookups(t){var i,o;this.idTypes$=this.lookupService.getNationalIDTypes().pipe((0,C.U)(s=>s.data)),this.countries$=this.lookupService.getCountries().pipe((0,C.U)(s=>s.data)),null===(i=this.profileForm.get("country_id"))||void 0===i||i.valueChanges.subscribe(s=>{var r,d;null===(r=this.profileForm.get("region_id"))||void 0===r||r.reset(),null===(d=this.profileForm.get("city_id"))||void 0===d||d.reset(),this.regions$=this.lookupService.getRegionsByCountryID(s).pipe()}),null===(o=this.profileForm.get("region_id"))||void 0===o||o.valueChanges.subscribe(s=>{var r;null===(r=this.profileForm.get("city_id"))||void 0===r||r.reset(),this.cities$=this.lookupService.getCities(s).pipe()}),this.regions$=this.lookupService.getRegionsByCountryID(),this.cities$=this.lookupService.getCities()}updateProfile(){this.profileForm.invalid||(this.amplitudeService.logEvent("SELF_SERVICE_UPDATE_USER_PROFILE"),this.otpService.updateProfile(this.ticketService.cleanObject(Object.assign(Object.assign({},this.profileForm.value),{captcha_code:this.capatchaCode,key:this.capatchIdentificationCode}))).subscribe(t=>{this.otpService.loggedUser.next(t),this.chacheService.setItem("userData",t),this.showProfile=!1,this.profileForm.patchValue(t),this.messageService.add({severity:"success",summary:this.translateService.instant("updated_Successfully")}),this.reloadCapatcha()},t=>{this.reloadCapatcha(),this.messageService.add({severity:"error",summary:this.displayErrors(t.error.errors)})}))}displayErrors(t){let i="";return t&&Object.keys(t).forEach(o=>{t[o]instanceof Array&&t[o].forEach(s=>{i=i+" "+s})}),i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.sK),e.Y36(U.d),e.Y36(I.f),e.Y36(oe.W),e.Y36(D.j),e.Y36(R.gz),e.Y36(R.F0),e.Y36(A.ez),e.Y36(e.sBO),e.Y36(G.Q),e.Y36($.Q),e.Y36(ne.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-search-box"]],inputs:{showLoader:"showLoader",resetSearch:"resetSearch",searchCriteria:"searchCriteria"},outputs:{searchTickets:"searchTickets",resetTicketDetails:"resetTicketDetails",updateOtpStatus:"updateOtpStatus"},features:[e.TTD],decls:53,vars:53,consts:[[1,"wrapper"],[1,"TopLine"],[1,"container","d-flex","justify-content-between"],[2,"cursor","pointer"],[2,"color","#fff",3,"click"],[1,"fal","fa-globe-americas"],[4,"ngIf"],[1,"header-container",3,"ngStyle"],[1,"container"],[1,"row","center"],[1,"header-link",3,"routerLink"],["alt","logo",1,"logo",3,"src"],["class","hidden-xs margin-l-15 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"search-box-container"],[1,"search-box-wrapper"],[1,"row","card-heading"],[1,"col-lg-3","col-12","add-ticket-btn","main-themed"],[1,"card"],["class","card-action align-self-end",4,"ngIf"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-12"],["for","ticketNo"],[1,"fa","fa-asterisk","required"],["id","ticketNo",3,"placeholder","formControl"],["class","invalid-feedback",4,"ngIf"],["class","col-lg-4 col-12",4,"ngIf"],[1,"col-md-4","col-12","card-actions"],[1,"col-md-5","col-xs-5","btn","btn-success","main-themed",3,"disabled","click"],[3,"showSpinner"],[1,"col-md-5","col-xs-5","btn","btn-secondary",3,"click"],[3,"mobile","showDialog","mobileForm"],["header","Title",3,"draggable","resizable","responsive","visible","breakpoints","visibleChange"],["pTemplate","header"],[1,""],["class","form-horizontal",4,"ngIf"],["pTemplate","footer"],[1,"text-decoration-none",3,"href"],[1,"hidden-xs","margin-l-15","d-flex","justify-content-center","align-items-center"],["alt","logo",3,"src"],[1,"card-action","align-self-end"],[1,"btn","lang-btn","rounded-pill","main-themed",3,"click"],["src","assets/user.svg","alt","","width","25"],["src","assets/logout.svg","alt","","width","25"],[1,"invalid-feedback"],[1,"col-lg-4","col-12"],[3,"resetField","mobileValue","disabled","control","label","inputId","inputType","requiredPattern"],[1,"form-horizontal"],[1,"col-md-6"],[3,"label","inputId","inputType","control",4,"ngIf"],["class","mb-3",4,"ngIf"],["lang","ar",3,"label","hijri","formControl",4,"ngIf"],[3,"mobileValue","required","label","inputId","inputType","control"],[3,"parentForm","fieldName","label","disabled","formControl",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"col-md-6","mt-3"],["class","form-group",4,"ngIf"],[1,"row","mt-5"],[1,"col-xs-12","d-flex","justify-content-end"],[1,"btn","btn-success","margin-r-10","mx-1","main-themed",3,"click"],[3,"label","inputId","inputType","control"],[1,"mb-3"],["lang","ar",3,"label","hijri","formControl"],[3,"parentForm","fieldName","label","disabled","formControl"],[3,"label","inputId","inputType","control","sourceObs$","optionLabel","optionValue"],[1,"form-group"],[1,"col-md-4"],["type","text","maxlength","6",1,"form-control",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"col-md-10"],["id","diab_img",2,"display","block","width","100%","height","50px",3,"src","alt"],[1,"col-md-2"],["data-toggle","tooltip",1,"btn","btn-default","btn-sm",2,"width","100%","margin-right","5px","padding","10px 0","border","0",3,"click"],["aria-hidden","true",1,"fa","fa-refresh"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"ul"),e.TgZ(4,"li",3),e.TgZ(5,"a",4),e.NdJ("click",function(){return i.changeLang()}),e._UZ(6,"i",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,Re,5,4,"ul",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"header",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"a",10),e._UZ(13,"img",11),e.YNc(14,Be,2,1,"span",12),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"div",15),e.TgZ(18,"span",16),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div",17),e.YNc(22,Pe,5,0,"div",18),e.ALo(23,"async"),e.TgZ(24,"div",19),e.TgZ(25,"form",20),e.TgZ(26,"div",21),e.TgZ(27,"div",22),e.TgZ(28,"label",23),e._uU(29),e.ALo(30,"translate"),e.TgZ(31,"sup"),e._UZ(32,"i",24),e.qZA(),e.qZA(),e._UZ(33,"input",25),e.ALo(34,"translate"),e.YNc(35,Ye,4,8,"div",26),e.YNc(36,He,4,8,"div",26),e.qZA(),e.YNc(37,$e,2,8,"div",27),e.TgZ(38,"div",28),e.TgZ(39,"button",29),e.NdJ("click",function(){return i.search()}),e.YNc(40,Ge,3,3,"span",6),e._UZ(41,"hollat-spinner",30),e.qZA(),e.TgZ(42,"button",31),e.NdJ("click",function(){return i.reset()}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"app-otp-verify",32),e.NdJ("mobileForm",function(s){return i.getData(s)}),e.qZA(),e.TgZ(46,"p-dialog",33),e.NdJ("visibleChange",function(s){return i.showProfile=s}),e.YNc(47,je,3,3,"ng-template",34),e.TgZ(48,"div",35),e.TgZ(49,"div",19),e.YNc(50,_t,26,22,"form",36),e.ALo(51,"async"),e.qZA(),e.qZA(),e.YNc(52,ut,0,0,"ng-template",37),e.qZA()),2&t&&(e.xp6(7),e.hij(" ",i.switchToLang," "),e.xp6(1),e.Q6J("ngIf",i.mainSite),e.xp6(1),e.Q6J("ngStyle",e.VKq(48,pt,"url("+i.headerBackgroundImage+")")),e.xp6(3),e.Q6J("routerLink",e.DdM(50,gt)),e.xp6(1),e.Q6J("src",i.logoImage,e.LSH),e.xp6(1),e.Q6J("ngIf",i.getSmallImage),e.xp6(5),e.hij(" ",e.lcZ(20,36,"TICKET_SEARCH.TITLE"),""),e.xp6(3),e.Q6J("ngIf",e.lcZ(23,38,i.otpService.loggedUser)),e.xp6(3),e.Q6J("formGroup",i.searchForm),e.xp6(2),e.ekj("col-lg-4",!i.currentUser)("col-lg-8",i.currentUser),e.xp6(2),e.hij(" ",e.lcZ(30,40,"GLOBAL.TICKET_NUMBER")," "),e.xp6(4),e.Gre("form-control ",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&i.ticketNoFormControl.errors?"is-invalid":"",""),e.s9C("placeholder",e.lcZ(34,42,"GLOBAL.TICKET_NUMBER")),e.Q6J("formControl",i.ticketNoFormControl),e.xp6(2),e.Q6J("ngIf",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&(null==i.ticketNoFormControl.errors?null:i.ticketNoFormControl.errors.required)),e.xp6(1),e.Q6J("ngIf",i.ticketNoFormControl.touched&&i.ticketNoFormControl.dirty&&(null==i.ticketNoFormControl.errors?null:i.ticketNoFormControl.errors.numberOnly)),e.xp6(1),e.Q6J("ngIf",!i.currentUser),e.xp6(2),e.Q6J("disabled",!i.searchForm.valid||i.showLoader),e.xp6(1),e.Q6J("ngIf",!i.showLoader),e.xp6(1),e.Q6J("showSpinner",i.showLoader),e.xp6(2),e.Oqu(e.lcZ(44,44,"GLOBAL.RESET")),e.xp6(2),e.Q6J("mobile",i.phoneNoFormControl.value)("showDialog",i.showDialog),e.xp6(1),e.Akn(e.DdM(51,mt)),e.Q6J("draggable",!1)("resizable",!1)("responsive",!0)("visible",i.showProfile)("breakpoints",e.DdM(52,ht)),e.xp6(4),e.Q6J("ngIf",e.lcZ(51,46,i.otpService.loggedUser)))},directives:[f.O5,f.PC,R.yS,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.oH,E.P,Qe,B.V,A.jx,P.V,a.F,ae.Z,Ve.T,a.nD,a.On],pipes:[S.X$,f.Ov],styles:[".search-box-container[_ngcontent-%COMP%]{position:relative}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]{z-index:2;width:100%}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card-heading[_ngcontent-%COMP%]{position:relative;top:1.5rem;margin:unset}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:.25rem}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .add-ticket-btn[_ngcontent-%COMP%]{padding:.5rem .5rem 2rem;border-radius:20px;position:relative}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-bottom:30px;background-color:transparent;width:100%;border:unset;box-shadow:unset}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%]{position:absolute;top:-2.5rem;color:#fff;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action.lang-btn[_ngcontent-%COMP%]{background-color:#c2a327}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .25rem}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border-radius:20px;background:#ffffff;border:1px solid #DBDADA;box-shadow:0 3px 6px #0003}.search-box-container[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;flex-direction:row;justify-content:space-around;align-items:center}@media (max-width: 768px){.card-action[_ngcontent-%COMP%]{border:2px solid;background-color:unset}.card-action.lang-btn[_ngcontent-%COMP%]{border-color:#fff!important;background-color:unset!important}}.header-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;margin-bottom:30px;background-size:cover;padding:30px;background-position:center;max-height:400px;min-height:200px;border-radius:0 0 25px 25px;margin-top:40px}.header-container[_ngcontent-%COMP%]   .header-link[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.logo[_ngcontent-%COMP%]{max-width:400px}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:100px}}"],changeDetection:0}),n})();var N=g(3342),ce=g(5304),O=g(2340),z=g(1841);let de=(()=>{class n{constructor(t,i){this.httpClient=t,this.localStorage=i}deleteFile(t){return this.httpClient.delete(`${O.N.baseAPIURL}/api/tickets/delete_file/${t}`)}downloadFromServer(t){const i=document.createElement("a"),o=`${O.N.baseAPIURL}/api/self_service/downloadFile`;i.setAttribute("target","_blank"),fetch(o,{method:"post",body:JSON.stringify({path:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.localStorage.getItem("otp_token")}}).then(s=>s.blob()).then(s=>{i.href=window.URL.createObjectURL(s),i.download=t,i.click()})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.eN),e.LFG($.Q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_e=(()=>{class n{constructor(t){this.httpClient=t}getConfiguredFieldsBySlug(t){return this.httpClient.get(`${O.N.baseAPIURL}/api/form-fields-bySlug/${t}`)}getConfiguredFields(){return this.httpClient.get(`${O.N.baseAPIURL}/api/selfService-fields`)}getSystemOptions(t){return this.httpClient.get(`${O.N.baseAPIURL}/api/system-lookup-options/${t}`)}getNewOptions(t){return this.httpClient.get(`${O.N.baseAPIURL}/api/all-new-lookup-options?new_lookup_id=${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=g(5396),ue=g(5498),vt=g(6543),Tt=g(8015);const bt=function(){return{color:"#FF912C"}},xt=function(n){return{"fit-container":n}};let pe=(()=>{class n{constructor(){this.starNo=5,this.value=0,this.readonly=!1,this.disabled=!1,this.showCancel=!1,this.fitContainer=!1,this.ratingSelected=new e.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-star-rating"]],inputs:{starNo:"starNo",value:"value",readonly:"readonly",disabled:"disabled",showCancel:"showCancel",fitContainer:"fitContainer"},outputs:{ratingSelected:"ratingSelected"},decls:1,vars:9,consts:[[3,"iconOnStyle","ngClass","stars","ngModel","readonly","cancel","onRate"]],template:function(t,i){1&t&&(e.TgZ(0,"p-rating",0),e.NdJ("onRate",function(s){return i.ratingSelected.emit(s.value)}),e.qZA()),2&t&&e.Q6J("iconOnStyle",e.DdM(6,bt))("ngClass",e.VKq(7,xt,i.fitContainer))("stars",i.starNo)("ngModel",i.value)("readonly",i.readonly)("cancel",i.showCancel)},directives:[Tt.iG,f.mk,a.JJ,a.On],styles:["[_nghost-%COMP%]     .p-rating .p-rating-icon{margin-left:unset!important}[_nghost-%COMP%]     .p-rating.p-readonly .p-rating-icon{cursor:default}[_nghost-%COMP%]     p-rating.fit-container .p-rating{display:flex;flex-direction:row;justify-content:space-between}"]}),n})();function Ct(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-radioButton",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(4).checkValue(o,s)})("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(4).evaluationResult[s.id].value=o}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(2).$implicit,o=e.oxw(2).index,s=e.oxw(2);e.MGl("name","section",o,""),e.s9C("label",e.lcZ(1,4,"yes"===t.option?"GLOBAL.YES":"GLOBAL.NO")),e.Q6J("value",t.id)("ngModel",s.evaluationResult[i.id].value)}}function kt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"textarea",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2).$implicit;return e.oxw(4).evaluationResult[s.id].details=o}),e.ALo(1,"translate"),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.MGl("name","details_",t.id,""),e.s9C("placeholder",e.lcZ(1,3,"GLOBAL.DETAILS")),e.Q6J("ngModel",i.evaluationResult[t.id].details)}}function St(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"div",10),e.YNc(4,Ct,2,6,"p-radioButton",11),e.YNc(5,kt,2,5,"textarea",12),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("ngForOf",t.closed_endeds),e.xp6(1),e.Q6J("ngIf",i.showDetailsArea)}}function Zt(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"div",16),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",17),e.TgZ(6,"hollat-star-rating",18),e.NdJ("ratingSelected",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(4).mapValue(o,s,s.closed_endeds)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(4),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("fitContainer",!0)("value",i.getRatingValue(t))}}const yt=function(){return{standalone:!0}};function At(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"div",19),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",20),e.TgZ(6,"textarea",21),e.NdJ("keyup",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(4).setValue(o,s)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(4),e.Oqu(t[i.getLabeledData("title_")]),e.xp6(2),e.Q6J("ngModelOptions",e.DdM(3,yt))("ngModel",null==i.evaluationResult[t.id]?null:i.evaluationResult[t.id].details)}}function wt(n,l){if(1&n&&(e.ynx(0),e.YNc(1,St,6,3,"ng-container",1),e.YNc(2,Zt,7,3,"ng-container",1),e.YNc(3,At,7,4,"ng-container",1),e.BQk()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf","mcq"===t.type),e.xp6(1),e.Q6J("ngIf","rate"===t.type),e.xp6(1),e.Q6J("ngIf","open_ended"===t.type)}}function Lt(n,l){if(1&n&&(e.TgZ(0,"p-accordionTab",9),e.YNc(1,wt,4,3,"ng-container",3),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,o=t.index,s=e.oxw(2);e.s9C("header",i[s.getLabeledData("title_")]),e.Q6J("selected",0===o),e.xp6(1),e.Q6J("ngForOf",i.questions)}}function Ft(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Lt,2,3,"p-accordionTab",8),e.BQk()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.questions.length)}}function It(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}function Ot(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form"),e.TgZ(1,"p-accordion",2),e.YNc(2,Ft,2,1,"ng-container",3),e.qZA(),e.TgZ(3,"div",4),e.TgZ(4,"button",5),e.NdJ("click",function(){const s=e.CHM(t).ngIf;return e.oxw().submitRating(s)}),e.YNc(5,It,3,3,"span",1),e._UZ(6,"hollat-spinner",6),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().reset()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.ngIf,i=e.oxw();e.xp6(1),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("disabled",!i.checkRatingForm()),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading),e.xp6(2),e.Oqu(e.lcZ(9,6,"GLOBAL.RESET"))}}const Et=function(){return{width:"75vw"}};let Mt=(()=>{class n{constructor(t,i,o){this.ticketService=t,this.translateService=i,this.toastService=o,this.ticketId=0,this.showDialog=!1,this.ratingSubmitted=new e.vpe,this.rateForm=new a.cw({}),this.rating=0,this.evaluations$=new b.y,this.evaluationResult={},this.showDetailsArea=!1,this.isLoading=!1}ngOnInit(){this.evaluations$=this.ticketService.getRatingQuestions().pipe((0,C.U)(t=>t.data),(0,N.b)(t=>this.buildRatingForm(t)))}buildRatingForm(t){t.forEach(i=>{i.questions.forEach(o=>{this.evaluationResult[o.id]={value:0,details:""}})})}submitRating(t){this.isLoading=!0;let i=[];for(const s in this.evaluationResult)if(this.evaluationResult[s].value){const r={ticket_id:this.ticketId,question_id:s,closed_ended_id:this.evaluationResult[s].value,details:this.evaluationResult[s].details};""!==this.evaluationResult[s].details&&(r.details=this.evaluationResult[s].details),i.push(r)}else i.push({ticket_id:this.ticketId,question_id:s,closed_ended_id:null,details:this.evaluationResult[s].details});this.ticketService.submitRating({ticket_id:this.ticketId,questions:i}).subscribe(s=>{this.isLoading=!1,this.showDialog=!1,this.ratingSubmitted.emit(!0),this.toastService.showSuccessMessage("TOAST.SUCCESS.RATING.MESSAGE")},s=>{this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.RATING.MESSAGE",s.error.errors)})}getLabeledData(t){return`${t}${this.translateService.currentLang}`}mapValue(t,i,o){this.evaluationResult[i.id].value=o.filter(s=>s.option===t.toString())[0].id}getRatingValue(t){const i=t.closed_endeds.filter(o=>o.id===this.evaluationResult[t.id].value)[0];return i?parseInt(i.option):0}checkValue(t,i){"mcq"===i.type&&(t===i.closed_endeds.find(o=>"no"===o.option).id?(this.showDetailsArea=!0,this.evaluationResult[i.id].details=""):this.evaluationResult[i.id].details="\u062a\u0645\u062a")}checkRatingForm(){if(this.showDetailsArea)return this.rateForm.valid;for(const t in this.evaluationResult)if(!this.evaluationResult[t].value&&!this.evaluationResult[t].details)return!1;return!0}reset(){for(let t in this.evaluationResult)this.evaluationResult[t]={value:0,details:""}}setValue(t,i){this.evaluationResult[i.id].details=t.target.value}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.d),e.Y36(S.sK),e.Y36(Q.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-rating-dialog"]],inputs:{ticketId:"ticketId",showDialog:"showDialog"},outputs:{ratingSubmitted:"ratingSubmitted"},decls:4,vars:10,consts:[[3,"header","visible","visibleChange","onHide"],[4,"ngIf"],[3,"multiple"],[4,"ngFor","ngForOf"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[3,"showSpinner"],[1,"btn","btn-secondary",3,"click"],[3,"selected","header",4,"ngIf"],[3,"selected","header"],[1,"d-flex","flex-row"],[3,"name","value","ngModel","label","ngModelChange",4,"ngFor","ngForOf"],["style","width: 100%;","pInputTextarea","",3,"name","placeholder","ngModel","ngModelChange",4,"ngIf"],[3,"name","value","ngModel","label","ngModelChange"],["pInputTextarea","",2,"width","100%",3,"name","placeholder","ngModel","ngModelChange"],[1,"row","question-row"],[1,"col-md-9","col-12"],[1,"col-md-3","col-12"],[3,"fitContainer","value","ratingSelected"],[1,"col-md-12","col-12"],[1,"col-md-12"],[2,"width","100%","height","138px",3,"ngModelOptions","ngModel","keyup"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return i.showDialog=s})("onHide",function(){return i.ratingSubmitted.emit(!1)}),e.ALo(1,"translate"),e.YNc(2,Ot,10,8,"form",1),e.ALo(3,"async"),e.qZA()),2&t&&(e.Akn(e.DdM(9,Et)),e.s9C("header",e.lcZ(1,5,"GLOBAL.RATING")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,7,i.evaluations$)))},directives:[B.V,f.O5,a._Y,a.JL,a.F,j.UQ,f.sg,E.P,j.US,ue.EU,a.JJ,a.On,a.Fj,vt.g,pe],pipes:[S.X$,f.Ov],styles:[".actions[_ngcontent-%COMP%]{margin-top:.5rem}.actions[_ngcontent-%COMP%]   button.btn-success[_ngcontent-%COMP%]{margin-inline-end:5px}.question-row[_ngcontent-%COMP%]{border-bottom:1px solid #f4f4f4;border-width:80%;padding:0 0 1rem;margin:1rem 0}  .p-radiobutton-label{margin:0 7px}"]}),n})();var X=g(1727);const Nt=["attachments"];function qt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"input",10,11),e.NdJ("change",function(o){return e.CHM(t),e.oxw(2).onFileSelect(o)}),e.qZA()}}const Dt=function(n){return{disabled:n}};function Jt(n,l){if(1&n&&(e.TgZ(0,"label",12),e.O4$(),e.TgZ(1,"svg",13),e._UZ(2,"path",14),e.qZA(),e.kcU(),e.TgZ(3,"span",15),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,Dt,t.countError||t.maxReached)),e.xp6(4),e.Oqu(e.lcZ(5,2,"GLOBAL.ATTACHMENTS_PLACEHOLDER"))}}function Ut(n,l){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.countError)}}function Qt(n,l){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.invalidError)}}function Vt(n,l){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.sizeError)}}function Rt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"i",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=o.index,r=o.$implicit;return e.oxw(3).removeAttachment(s,r)}),e.O4$(),e.TgZ(1,"svg",22),e._UZ(2,"path",23),e.qZA(),e.qZA()}}const Bt=function(n){return{"cursor-pointer":n}};function Pt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"span",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return r.allowDownload?r.download(s):""}),e._uU(2),e.qZA(),e.YNc(3,Rt,3,0,"i",20),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Bt,i.allowDownload)),e.xp6(1),e.Oqu(i.getFileName(t)),e.xp6(1),e.Q6J("ngIf",!i.viewOnly)}}function Yt(n,l){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,Pt,4,5,"div",17),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.attachmentsList)}}function Ht(n,l){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.YNc(2,qt,2,0,"input",4),e.YNc(3,Jt,6,6,"label",5),e.TgZ(4,"div"),e.TgZ(5,"span",6),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,Ut,2,1,"div",8),e.YNc(10,Qt,2,1,"div",8),e.YNc(11,Vt,2,1,"div",8),e.qZA(),e.YNc(12,Yt,2,1,"div",9),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.viewOnly&&!t.countError&&!t.maxReached),e.xp6(1),e.Q6J("ngIf",!t.viewOnly),e.xp6(3),e.hij(" ",e.lcZ(7,7,"GLOBAL.ATTACHMENTS_HINT")," "),e.xp6(3),e.Q6J("ngIf",t.countError),e.xp6(1),e.Q6J("ngIf",t.invalidError),e.xp6(1),e.Q6J("ngIf",t.sizeError),e.xp6(1),e.Q6J("ngIf",t.attachmentsList&&t.attachmentsList.length)}}let ge=(()=>{class n{constructor(t,i){this.fileUploadService=t,this.themeService=i,this.resetFiles=!1,this.savedFiles=[],this.viewOnly=!1,this.deleteFromServer=!1,this.allowDownload=!1,this.onAttachmentsChange=new e.vpe,this.sizeError="",this.countError="",this.invalidError="",this.formData=new FormData,this.tempFiles=[],this.attachmentsList=[],this.maxReached=!1}ngOnInit(){}ngOnChanges(t){t&&t.resetFiles&&!0===t.resetFiles.currentValue&&this.reset(),t&&t.savedFiles&&t.savedFiles.currentValue&&(this.attachmentsList=[...t.savedFiles.currentValue])}onFileSelect(t){this.tempFiles=t.target.files;for(let i=0;this.tempFiles&&i<this.tempFiles.length;i++){let o=this.tempFiles[i];if(o.size>2e6)return void(this.sizeError="\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0627\u0644\u0627 \u064a\u062a\u0639\u062f\u064a 2 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a");if(this.sizeError="",!this.isValidFile(o.name))return void(this.invalidError="\u0635\u064a\u0641\u0629 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0627\u0646 \u062a\u0643\u0648\u0646 PNG \u0627\u0648 JPEG \u0627\u0648 PDF");if(this.invalidError="",5===this.attachmentsList.length)return this.countError="\u0627\u0642\u0635\u0649 \u0639\u062f\u062f \u0645\u0644\u0641\u0627\u062a \u0647\u0648 5",void(this.maxReached=!0);this.maxReached=!1,this.countError="",o.size<=2e6&&this.isValidFile(o.name)&&this.attachmentsList.length<5&&(this.attachmentsList.push(this.tempFiles[i]),this.onAttachmentsChange.emit(this.attachmentsList),5===this.attachmentsList.length&&(this.maxReached=!0))}}isValidFile(t){var i,o;const r=null===(o=null===(i=this.attachments)||void 0===i?void 0:i.nativeElement)||void 0===o?void 0:o.value.split("."),d=r[r.length-1].toLowerCase();return-1!==["jpg","jpeg","png","bmp","gif","pdf"].lastIndexOf(d)}removeAttachment(t,i){this.countError="",this.maxReached=!1,this.tempFiles=[];for(let o=0;o<this.attachmentsList.length;o++)o!==t&&this.tempFiles.push(this.attachmentsList[o]);this.attachmentsList=[...this.tempFiles],this.tempFiles=[],this.attachments&&!this.attachmentsList.length&&(this.attachments.nativeElement.value=""),this.onAttachmentsChange.emit(this.attachmentsList),this.deleteFromServer&&this.fileUploadService.deleteFile(i.id).subscribe(o=>{})}getFileName(t){return t.name?t.name:t.file_name?(t.displayName=t.file_name.split("/"),t.displayName=t.displayName[t.displayName.length-1],t.displayName||"file"):"file"}download(t){this.fileUploadService.downloadFromServer(t.file_name)}reset(){this.attachmentsList=[],this.invalidError="",this.attachments&&(this.attachments.nativeElement.value="")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(de),e.Y36(I.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-multipe-file-upload"]],viewQuery:function(t,i){if(1&t&&e.Gf(Nt,5,e.SBq),2&t){let o;e.iGM(o=e.CRH())&&(i.attachments=o.first)}},inputs:{resetFiles:"resetFiles",savedFiles:"savedFiles",viewOnly:"viewOnly",deleteFromServer:"deleteFromServer",allowDownload:"allowDownload"},outputs:{onAttachmentsChange:"onAttachmentsChange"},features:[e.TTD],decls:2,vars:1,consts:[["class","multiple-file-upload-wrapper",4,"ngIf"],["id","download",2,"display","none"],[1,"multiple-file-upload-wrapper"],[1,"file-input-wrapper"],["accept","image/x-png,image/jpeg,application/pdf","id","attachments","max","5","multiple","","name","attachments","type","file",3,"change",4,"ngIf"],["class","file-representation","for","attachments",3,"ngClass",4,"ngIf"],[1,"hint"],[1,"errors"],[4,"ngIf"],["class","attachments-list",4,"ngIf"],["accept","image/x-png,image/jpeg,application/pdf","id","attachments","max","5","multiple","","name","attachments","type","file",3,"change"],["attachments",""],["for","attachments",1,"file-representation",3,"ngClass"],["fill","#9c9c9c","viewBox","0 0 640 512","width","20","xmlns","http://www.w3.org/2000/svg"],["d","M144 480C64.47 480 0 415.5 0 336C0 273.2 40.17 219.8 96.2 200.1C96.07 197.4 96 194.7 96 192C96 103.6 167.6 32 256 32C315.3 32 367 64.25 394.7 112.2C409.9 101.1 428.3 96 448 96C501 96 544 138.1 544 192C544 204.2 541.7 215.8 537.6 226.6C596 238.4 640 290.1 640 352C640 422.7 582.7 480 512 480H144zM223 263C213.7 272.4 213.7 287.6 223 296.1C232.4 306.3 247.6 306.3 256.1 296.1L296 257.9V392C296 405.3 306.7 416 320 416C333.3 416 344 405.3 344 392V257.9L383 296.1C392.4 306.3 407.6 306.3 416.1 296.1C426.3 287.6 426.3 272.4 416.1 263L336.1 183C327.6 173.7 312.4 173.7 303 183L223 263z"],[1,"font-weight-bold"],[1,"attachments-list"],["class","attachment-name",4,"ngFor","ngForOf"],[1,"attachment-name"],[1,"text",3,"ngClass","click"],[3,"click",4,"ngIf"],[3,"click"],["fill","#9c9c9c","viewBox","0 0 512 512","width","15","xmlns","http://www.w3.org/2000/svg"],["d","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"]],template:function(t,i){1&t&&(e.YNc(0,Ht,13,9,"div",0),e._UZ(1,"a",1)),2&t&&e.Q6J("ngIf",null==i.themeService?null:i.themeService.uploadFilesEnabled)},directives:[f.O5,f.mk,f.sg],pipes:[S.X$],styles:[".file-input-wrapper[_ngcontent-%COMP%]{overflow:hidden}.attachment-value[_ngcontent-%COMP%]{padding:15px;border-radius:30px;max-width:380px}.file-representation[_ngcontent-%COMP%]{width:99%;height:100%;background-color:#fff;color:#9c9c9c;border-radius:6px;border:1px solid #d2d6de;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:120px;font-size:17px;margin-top:10px;margin-bottom:10px}.file-representation.disabled[_ngcontent-%COMP%]{cursor:not-allowed}input[type=file][_ngcontent-%COMP%]{position:absolute;width:0;height:0;opacity:0}.errors[_ngcontent-%COMP%]{color:red;font-size:14px}.errors[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:5px 0}.attachments-list[_ngcontent-%COMP%]{margin-bottom:20px}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]{border-radius:20px;background-color:#fff;border:1px solid #9c9c9c;color:#9c9c9c;margin-bottom:8px;display:flex;align-items:center;cursor:pointer;justify-content:space-between;font-size:16px;padding-inline-end:8px}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:8px 10px;transition:all .3s;cursor:default;line-break:anywhere}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   .text.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{z-index:9;cursor:pointer;transition:all .3s}.attachments-list[_ngcontent-%COMP%]   .attachment-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#1e7b37!important}.hint[_ngcontent-%COMP%]{color:#aaa;font-size:10px;position:relative;top:-10px}"]}),n})();function $t(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"label",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-multipe-file-upload",12),e.NdJ("onAttachmentsChange",function(o){return e.CHM(t),e.oxw(2).onAttachmentsChange(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"GLOBAL.ATTACHMENTS")," "),e.xp6(2),e.Q6J("resetFiles",t.resetFiles)}}function Gt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.REPLY")))}function jt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form",2),e.TgZ(1,"div",3),e._UZ(2,"hollat-generic-input",4),e.qZA(),e.YNc(3,$t,5,4,"div",5),e.TgZ(4,"div",6),e.TgZ(5,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitReply()}),e.YNc(6,Gt,3,3,"span",8),e._UZ(7,"hollat-spinner",9),e.qZA(),e.TgZ(8,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().clearForm(!1)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.replyForm),e.xp6(2),e.Q6J("label","GLOBAL.MESSAGE")("inputId","message")("inputType",t.inputType.TEXTAREA)("control",t.getControl("details")),e.xp6(1),e.Q6J("ngIf",null==t.themeService?null:t.themeService.uploadFilesEnabled),e.xp6(2),e.Q6J("disabled",!t.replyForm.valid||t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("showSpinner",t.isLoading),e.xp6(2),e.Oqu(e.lcZ(10,10,"GLOBAL.RESET"))}}const Kt=function(){return{width:"50vw"}};let zt=(()=>{class n{constructor(t,i,o,s,r){this.ticketService=t,this.toastService=i,this.defaultsService=o,this.themeService=s,this.ref=r,this.showDialog=!1,this.resetFiles=!1,this.ticketId=0,this.replySubmitted=new e.vpe,this.inputType=J.n,this.replyForm=new a.cw({details:new a.NI("",[a.kI.required,a.kI.minLength(this.defaultsService.detailsMinLength),a.kI.maxLength(this.defaultsService.defaultMaxLength)]),files:new a.NI([]),ticket_id:new a.NI("")}),this.isLoading=!1}ngOnChanges(t){var i;t.ticketId&&t.ticketId.currentValue&&(null===(i=this.replyForm.get("ticket_id"))||void 0===i||i.patchValue(t.ticketId.currentValue))}getControl(t){return this.replyForm.get(t)}onAttachmentsChange(t){var i;null===(i=this.replyForm.get("files"))||void 0===i||i.patchValue([...t])}submitReply(){const t=Object.assign({},this.replyForm.value),i=new FormData;Object.keys(t).forEach(o=>{"files"===o?t.files&&t.files.forEach(s=>{i.append("files[]",s)}):i.append(o,t[o])}),this.ticketService.submitReply(i).subscribe(o=>{this.isLoading=!1,this.showDialog=!1,this.replySubmitted.emit(!0),this.toastService.showSuccessMessage("TOAST.SUCCESS.REPLY.MESSAGE")},o=>{var s;this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.REPLY.MESSAGE",null===(s=null==o?void 0:o.error)||void 0===s?void 0:s.errors)})}clearForm(t){t&&this.replySubmitted.emit(!1),this.replyForm.reset({ticket_id:this.ticketId}),this.replyForm.markAsUntouched(),Object.keys(this.replyForm.controls).forEach(i=>{var o,s;null===(o=this.replyForm.get(i))||void 0===o||o.markAsUntouched(),null===(s=this.replyForm.get(i))||void 0===s||s.updateValueAndValidity()}),this.resetFiles=!0,setTimeout(()=>{this.resetFiles=!1,this.ref.detectChanges()},0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.d),e.Y36(Q.D),e.Y36(X.p),e.Y36(I.f),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["hollat-reply-dialog"]],inputs:{showDialog:"showDialog",ticketId:"ticketId"},outputs:{replySubmitted:"replySubmitted"},features:[e.TTD],decls:3,vars:8,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"col-md-12"],[3,"label","inputId","inputType","control"],["class","col-md-12",4,"ngIf"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"control-label"],[3,"resetFiles","onAttachmentsChange"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return i.showDialog=s})("onHide",function(){return i.clearForm(!0)}),e.ALo(1,"translate"),e.YNc(2,jt,11,12,"form",1),e.qZA()),2&t&&(e.Akn(e.DdM(7,Kt)),e.s9C("header",e.lcZ(1,5,"GLOBAL.REPLY")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("ngIf",!i.resetFiles))},directives:[B.V,f.O5,a._Y,a.JL,a.sg,P.V,E.P,ge],pipes:[S.X$],styles:[".actions[_ngcontent-%COMP%]{margin-top:.5rem}"]}),n})();function Xt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}const Wt=function(){return{width:"50vw"}};let ei=(()=>{class n{constructor(t,i,o,s,r){this.ticketService=t,this.toastService=i,this.defaultsService=o,this.otpService=s,this.themeService=r,this.showDialog=!1,this.ticketId=0,this.status="",this.replySubmitted=new e.vpe,this.inputType=J.n,this.replyForm=new a.cw({change_status_comment:new a.NI("",[a.kI.required]),status:new a.NI(""),ticket_id:new a.NI("")}),this.isLoading=!1}ngOnChanges(t){var i,o;t.ticketId&&t.ticketId.currentValue&&(null===(i=this.replyForm.get("ticket_id"))||void 0===i||i.patchValue(t.ticketId.currentValue)),t.status&&t.status.currentValue&&(null===(o=this.replyForm.get("status"))||void 0===o||o.patchValue(t.status.currentValue))}getControl(t){return this.replyForm.get(t)}onAttachmentsChange(t){var i;null===(i=this.replyForm.get("files"))||void 0===i||i.patchValue([...t])}submitReply(){this.isLoading=!0;const t=Object.assign({},this.replyForm.value);this.ticketService.changeStatus(t).subscribe(i=>{this.isLoading=!1,this.showDialog=!1,this.otpService.updateUserTickets.next(t.ticket_id),this.toastService.showSuccessMessage("TOAST.SUCCESS.CHANGE_STATUS.MESSAGE")},i=>{var o;this.isLoading=!1,this.toastService.showErrorMessage("TOAST.ERROR.CHANGE_STATUS.MESSAGE",null===(o=null==i?void 0:i.error)||void 0===o?void 0:o.errors)})}clear(){var t;this.replySubmitted.emit(!1),this.showDialog=!1,null===(t=this.replyForm.get("change_status_comment"))||void 0===t||t.patchValue("")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.d),e.Y36(Q.D),e.Y36(X.p),e.Y36(D.j),e.Y36(I.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-status-dialog"]],inputs:{showDialog:"showDialog",ticketId:"ticketId",status:"status"},outputs:{replySubmitted:"replySubmitted"},features:[e.TTD],decls:9,vars:15,consts:[[3,"header","visible","visibleChange","onHide"],[3,"formGroup"],[1,"col-md-12","mb-3"],[3,"label","inputId","inputType","control"],[1,"actions","d-flex","justify-content-end"],[1,"btn","btn-success","main-themed",3,"disabled","click"],[4,"ngIf"],[3,"showSpinner"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(s){return i.showDialog=s})("onHide",function(){return i.clear()}),e.ALo(1,"translate"),e.TgZ(2,"form",1),e.TgZ(3,"div",2),e._UZ(4,"hollat-generic-input",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.submitReply()}),e.YNc(7,Xt,3,3,"span",6),e._UZ(8,"hollat-spinner",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Akn(e.DdM(14,Wt)),e.s9C("header",e.lcZ(1,12,"GLOBAL.CHANGE_STATUS")),e.Q6J("visible",i.showDialog),e.xp6(2),e.Q6J("formGroup",i.replyForm),e.xp6(2),e.Q6J("label","GLOBAL.COMMENT")("inputId","message")("inputType",i.inputType.TEXTAREA)("control",i.getControl("change_status_comment")),e.xp6(2),e.Q6J("disabled",!i.replyForm.valid||i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading))},directives:[B.V,a._Y,a.JL,a.sg,P.V,f.O5,E.P],pipes:[S.X$],styles:[""]}),n})();var K=g(4748),me=g(9411),he=g(946);const V=function(n){return{background:n}};function ti(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function ii(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).ngIf,i=e.oxw();e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status||null==t.status.replacement_status?null:t.status.replacement_status.color:"#000")),e.xp6(1),e.hij(" ",null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function ni(n,l){if(1&n&&e.YNc(0,ii,2,4,"span",34),2&n){const t=e.oxw().ngIf;e.Q6J("ngIf",null==t||null==t.status?null:t.status.replacement_status)}}function oi(n,l){if(1&n&&e._UZ(0,"hollat-star-rating",35),2&n){const t=e.oxw().ngIf;e.Q6J("value",t.rate)("readonly",!0)}}function li(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("ticket_type"))}}function si(n,l){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.ticket_type?null==t?null:t.ticket_type[i.mapValueToLang("title")]:"")}}function ai(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("main_reason_id"))}}function ri(n,l){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.main_reason?null==t?null:t.main_reason[i.mapValueToLang("title")]:"")}}function ci(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("sub_reason_id"))}}function di(n,l){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.sub_reason?null==t?null:t.sub_reason[i.mapValueToLang("title")]:"")}}function _i(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("hospital_id"))}}function ui(n,l){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Oqu(null!=t&&t.hospital?null==t?null:t.hospital[i.mapValueToLang("title")]:"")}}function pi(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fieldsFilter("details"))}}function gi(n,l){if(1&n&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(null==t?null:t.details)}}function mi(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).download(null==s?null:s.file_name)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",i.getFileName(null==t?null:t.file_name)," ")}}function hi(n,l){if(1&n&&(e.TgZ(0,"div",37),e.TgZ(1,"div"),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,mi,3,1,"ng-container",38),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(3),e.hij(" ",e.lcZ(4,2,"GLOBAL.ATTACHMENTS")," "),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.files)}}function fi(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openReplyForm()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.REPLY")))}function vi(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickStatus("escalated")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ESCALATE")))}function Ti(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onClickStatus("closed")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CLOSE")))}function bi(n,l){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,vi,3,3,"button",42),e.YNc(2,Ti,3,3,"button",43),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showEscalateButton()),e.xp6(1),e.Q6J("ngIf",t.showCloseButton())}}function xi(n,l){1&n&&(e.TgZ(0,"div",47),e.TgZ(1,"h3",48),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"TICKET_DETAILS.REPLIES.TITLE")," "))}function Ci(n,l){if(1&n&&(e.TgZ(0,"p",53),e.TgZ(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"span",56),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"TICKET_DETAILS.REPLIES.REPLY.MESSAGE")," \xa0"),e.xp6(2),e.Q6J("innerHTML",null==t?null:t.details,e.oJD)}}function ki(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",39),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(6).download(null!=s&&s.media_file?null==s?null:s.media_file:null==s?null:s.file_name)}),e._uU(2),e.qZA(),e.BQk()}if(2&n){const t=l.$implicit,i=e.oxw(6);e.xp6(2),e.hij(" ",i.getFileName(null!=t&&t.media_file?null==t?null:t.media_file:null==t?null:t.file_name)," ")}}function Si(n,l){if(1&n&&(e.TgZ(0,"p",53),e.TgZ(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,ki,3,1,"ng-container",38),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"GLOBAL.ATTACHMENTS"),":"),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.files)}}function Zi(n,l){if(1&n&&(e.TgZ(0,"div",50),e.TgZ(1,"div",51),e.TgZ(2,"div",52),e.TgZ(3,"p",53),e.TgZ(4,"strong"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",52),e.TgZ(10,"span",54),e._uU(11),e.ALo(12,"date"),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,Ci,5,4,"p",55),e.YNc(14,Si,5,4,"p",55),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.hij("",e.lcZ(6,5,"TICKET_DETAILS.REPLIES.REPLY.SENT_BY")," \xa0"),e.xp6(3),e.Oqu(null==t||null==t.user?null:t.user.name),e.xp6(3),e.Oqu(e.xi3(12,7,null==t?null:t.created_at,"d/M/yyyy hh:mm a")),e.xp6(2),e.Q6J("ngIf",null==t?null:t.details),e.xp6(1),e.Q6J("ngIf",null==t?null:t.files.length)}}function yi(n,l){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Zi,15,10,"div",49),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.sent)}}function Ai(n,l){if(1&n&&(e.ynx(0),e.YNc(1,xi,4,3,"div",46),e.YNc(2,yi,2,1,"div",38),e.BQk()),2&n){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0),e.xp6(1),e.Q6J("ngForOf",t)}}function wi(n,l){1&n&&(e.ynx(0),e.TgZ(1,"span",57),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"auto_close_msg")," "))}const fe=function(){return{standalone:!0}},Li=function(n){return{field:n}};function Fi(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",58),e.TgZ(2,"h4",59),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",51),e.TgZ(7,"div",60),e.TgZ(8,"p-radioButton",61),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).ticketRate=o})("ngModelChange",function(){return e.CHM(t),e.oxw(2).toggleTicketQuestionaire(!0)}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",60),e.TgZ(11,"p-radioButton",62),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).ticketRate=o})("ngModelChange",function(){return e.CHM(t),e.oxw(2).toggleTicketQuestionaire(!1)}),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"span",63),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.AsE(" ",e.lcZ(4,11,"GLOBAL.RATING")," : ",e.lcZ(5,13,"GLOBAL.TICKET_QUESTION.TITLE")," "),e.xp6(5),e.Q6J("ngModel",t.ticketRate)("ngModelOptions",e.DdM(22,fe))("label",e.lcZ(9,15,"GLOBAL.YES"))("value",!0),e.xp6(3),e.Q6J("ngModel",t.ticketRate)("label",e.lcZ(12,17,"GLOBAL.NO"))("ngModelOptions",e.DdM(23,fe))("value",!1),e.xp6(4),e.hij(" ",e.xi3(16,19,"feedbackHint",e.VKq(24,Li,t.daysCountForFeedback))," ")}}function Ii(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.TgZ(3,"h3",7),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",8),e.TgZ(7,"a",9),e._UZ(8,"i",10),e.qZA(),e.TgZ(9,"a",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetTicketSearch()}),e._UZ(10,"i",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",13),e.TgZ(12,"div",14),e.TgZ(13,"div",15),e.TgZ(14,"h6",16),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",17),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.YNc(21,ti,2,4,"span",18),e.YNc(22,ni,1,1,"ng-template",null,19,e.W1O),e.YNc(24,oi,1,2,"hollat-star-rating",20),e.qZA(),e.qZA(),e.TgZ(25,"div",21),e.TgZ(26,"div",22),e.YNc(27,li,2,1,"div",23),e.YNc(28,si,2,1,"div",24),e.YNc(29,ai,2,1,"div",23),e.YNc(30,ri,2,1,"div",24),e.YNc(31,ci,2,1,"div",23),e.YNc(32,di,2,1,"div",24),e.YNc(33,_i,2,1,"div",23),e.YNc(34,ui,2,1,"div",24),e.YNc(35,pi,2,1,"div",23),e.YNc(36,gi,2,1,"div",24),e.TgZ(37,"div",25),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"div",25),e._uU(41),e.qZA(),e.qZA(),e.YNc(42,hi,6,4,"div",26),e.YNc(43,fi,3,3,"button",27),e.TgZ(44,"hollat-rating-dialog",28),e.NdJ("ratingSubmitted",function(o){return e.CHM(t),e.oxw().submitRating(o)}),e.qZA(),e.qZA(),e.YNc(45,bi,3,2,"div",29),e.qZA(),e.qZA(),e.YNc(46,Ai,3,2,"ng-container",30),e.ALo(47,"async"),e.YNc(48,wi,4,3,"ng-container",30),e.YNc(49,Fi,17,26,"ng-container",30),e.TgZ(50,"hollat-reply-dialog",31),e.NdJ("replySubmitted",function(o){return e.CHM(t),e.oxw().submitReply(o)}),e.qZA(),e.TgZ(51,"app-change-status-dialog",32),e.NdJ("replySubmitted",function(o){return e.CHM(t),e.oxw().submitReply(o)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.ngIf,i=e.MAs(23),o=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,32,"TICKET_DETAILS.TITLE")),e.xp6(11),e.AsE(" ",e.lcZ(16,34,"GLOBAL.TICKET_NUMBER")," #",null==t?null:t.id," "),e.xp6(4),e.Oqu(e.xi3(20,36,null==t?null:t.created_at,"d/M/yyyy hh:mm a")),e.xp6(2),e.Q6J("ngIf",null==t||null==t.status?null:t.status.display_to_customers)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",3==t.status.main_status_id&&t.rate),e.xp6(3),e.Q6J("ngIf",o.showField("ticket_type")),e.xp6(1),e.Q6J("ngIf",o.showField("ticket_type")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.main_reason)&&o.showField("main_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.main_reason)&&o.showField("main_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.sub_reason)&&o.showField("sub_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.sub_reason)&&o.showField("sub_reason_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.hospital)&&o.showField("hospital_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.hospital)&&o.showField("hospital_id")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.details)&&o.showField("details")),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.details)&&o.showField("details")),e.xp6(2),e.hij("",e.lcZ(39,39,"GLOBAL.SECTOR_REPLY"),": "),e.xp6(3),e.hij("",null==t?null:t.sector_reply,": "),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.files.length)>0),e.xp6(1),e.Q6J("ngIf",9===t.status.main_status_id),e.xp6(1),e.Q6J("ticketId",t.id)("showDialog",o.displayRating),e.xp6(1),e.Q6J("ngIf",o.themeService.SELF_SERVICE_CLIENT_CAN_CHANGE_STATUS),e.xp6(1),e.Q6J("ngIf",e.lcZ(47,41,o.replies$)),e.xp6(2),e.Q6J("ngIf",null==t?null:t.auto_closed),e.xp6(1),e.Q6J("ngIf",o.SelfServiceFeedbackQuestionnaire&&t.status.main_status_id==o.themeService.RATE_CONFIG_ID&&!(null!=t&&t.rate)&&o.checkRating(t)&&!(null!=t&&t.auto_closed)),e.xp6(1),e.Q6J("ticketId",null==t?null:t.id)("showDialog",o.displayReply),e.xp6(1),e.Q6J("ticketId",null==t?null:t.id)("showDialog",o.showStatusDialog)("status",o.status)}}function Oi(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function Ei(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status||null==t.status.replacement_status?null:t.status.replacement_status.color:"#000")),e.xp6(1),e.hij(" ",null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function Mi(n,l){if(1&n&&e.YNc(0,Ei,2,4,"span",34),2&n){const t=e.oxw().$implicit;e.Q6J("ngIf",null==t||null==t.status?null:t.status.replacement_status)}}function Ni(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",74),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(4).setSelectedTicket(s)}),e.TgZ(1,"h6",75),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",54),e.TgZ(5,"small"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.qZA(),e.YNc(8,Oi,2,4,"span",76),e.YNc(9,Mi,1,1,"ng-template",null,77,e.W1O),e.qZA()}if(2&n){const t=l.$implicit,i=e.MAs(10);e.xp6(2),e.AsE("",e.lcZ(3,5,"GLOBAL.TICKET_NUMBER"),":",t.id,""),e.xp6(4),e.Oqu(e.xi3(7,7,null==t?null:t.created_at,"d/M/yyyy hh:mma")),e.xp6(2),e.Q6J("ngIf",null==t||null==t.status?null:t.status.display_to_customers)("ngIfElse",i)}}function qi(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Ni,11,10,"div",73),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.userTickets$)}}function Di(n,l){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NO_TICKETS"),""))}function Ji(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-tabPanel",71),e.ALo(1,"translate"),e.YNc(2,qi,2,1,"ng-container",30),e.YNc(3,Di,3,3,"div",72),e.TgZ(4,"p-paginator",69,70),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw(2).userTicketsChangePage(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.s9C("header",e.lcZ(1,7,"TICKET_DETAILS.MY_TICKETS.TITLE")),e.xp6(2),e.Q6J("ngIf",t.userTickets$),e.xp6(1),e.Q6J("ngIf",0==(null==t.userTickets$?null:t.userTickets$.length)),e.xp6(1),e.Q6J("dir","ltr")("rows",t.similarTicketPageCount)("totalRecords",t.userTicketsTotal)("alwaysShow",!1)}}function Ui(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status?null:t.status.color:"#000")),e.xp6(1),e.hij(" ",null==t?null:t.status[i.mapValueToLang("title")]," ")}}function Qi(n,l){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.VKq(2,V,null!=t&&null!=t.status&&t.status.color?null==t||null==t.status||null==t.status.replacement_status?null:t.status.replacement_status.color:"#000")),e.xp6(1),e.hij(" ",null==t||null==t.status?null:t.status.replacement_status[i.mapValueToLang("title")]," ")}}function Vi(n,l){if(1&n&&e.YNc(0,Qi,2,4,"span",34),2&n){const t=e.oxw().$implicit;e.Q6J("ngIf",null==t||null==t.status?null:t.status.replacement_status)}}function Ri(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",74),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).setSelectedTicket(s)}),e.TgZ(1,"h6",75),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",54),e.TgZ(5,"small"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.qZA(),e.YNc(8,Ui,2,4,"span",76),e.YNc(9,Vi,1,1,"ng-template",null,77,e.W1O),e.qZA()}if(2&n){const t=l.$implicit,i=e.MAs(10);e.xp6(2),e.AsE("",e.lcZ(3,5,"GLOBAL.TICKET_NUMBER"),":",t.id,""),e.xp6(4),e.Oqu(e.xi3(7,7,null==t?null:t.created_at,"d/M/yyyy hh:mma")),e.xp6(2),e.Q6J("ngIf",null==t||null==t.status?null:t.status.display_to_customers)("ngIfElse",i)}}function Bi(n,l){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NO_TICKETS"),""))}function Pi(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Ri,11,10,"div",73),e.YNc(2,Bi,3,3,"div",72),e.BQk()),2&n){const t=l.ngIf;e.xp6(1),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",0==(null==t?null:t.length))}}function Yi(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",64),e.TgZ(1,"div",4),e.TgZ(2,"div",65),e.TgZ(3,"p-tabView",66),e.NdJ("onChange",function(o){return e.CHM(t),e.oxw().setActivetab(o)})("activeIndexChange",function(o){return e.CHM(t),e.oxw().activeTab=o}),e.YNc(4,Ji,6,9,"p-tabPanel",67),e.TgZ(5,"p-tabPanel",68),e.ALo(6,"translate"),e.YNc(7,Pi,3,2,"ng-container",30),e.ALo(8,"async"),e.TgZ(9,"p-paginator",69,70),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw().changePage(o)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("styleClass","default-font")("activeIndex",t.activeTab),e.xp6(1),e.Q6J("ngIf",t.isAuthorizedUser),e.xp6(1),e.s9C("header",e.lcZ(6,9,"TICKET_DETAILS.MY_TICKETS.TAB2")),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,11,t.clientTickets$)),e.xp6(2),e.Q6J("dir","ltr")("rows",t.similarTicketPageCount)("totalRecords",t.totalSimilarTickets)("alwaysShow",!1)}}let Hi=(()=>{class n{constructor(t,i,o,s,r,d,m,c,u,h){this.ticketService=t,this.translateService=i,this.toastService=o,this.themeService=s,this.ref=r,this.otbService=d,this.amplitudeService=m,this.downloadService=c,this.cahceService=u,this.fieldsService=h,this.clientTickets={},this.resetTicket=!1,this.toggleSpinner=new e.vpe,this.resetSearch=new e.vpe,this.isAuthorizedUser=!1,this.ticketRate=void 0,this.ticketDetails$=new b.y,this.replies$=new b.y,this.now=new Date,this.displayRating=!1,this.displayReply=!1,this.totalSimilarTickets=0,this.similarTicketPageCount=10,this.currentPage=1,this.clientTickets$=new b.y,this.userTickets$=null,this.lang="ar",this.daysCountForFeedback="",this.requested=!1,this.userTicketsCurrentPage=1,this.userTicketsTotal=0,this.activeTab=0,this.canChangeStatus=!1,this.fields=[],this.status="",this.showStatusDialog=!1,this.fieldsService.getConfiguredFields().pipe((0,C.U)(p=>(this.fields=p.fields,p.fields))).subscribe(),this.lang=this.translateService.currentLang,d.loggedUser.subscribe(p=>{p&&!this.requested&&(this.currentUser=p,this.getUserLoggedTickets(),this.requested=!0)}),this.daysCountForFeedback=this.cahceService.getItem("FeedbackExpiredTimeInDays"),this.otbService.userInfo.subscribe(p=>{this.otpUser=p}),this.themeService.selfServiceConfigs.subscribe(p=>{this.canChangeStatus=!!+p.SELF_SERVICE_CLIENT_CAN_CHANGE_STATUS.value}),this.currentUser&&this.otbService.updateUserTickets.subscribe(p=>{this.getUserLoggedTickets()})}set tabIndex(t){}ngOnDestroy(){this.status="",this.showStatusDialog=!1}getUserLoggedTickets(){this.ticketRate=void 0,this.isAuthorizedUser=!0,this.ticketDetails$=(0,y.of)(null),this.ticketDetails=void 0,this.userTickets$=[],this.ticketService.getClientTickets({}).subscribe(t=>{this.userTickets$=t.data,this.userTicketsTotal=t.meta.total,this.userTicketsCurrentPage=t.meta.current_page,this.ticketDetails&&this.userTickets$.forEach(i=>{i.id==this.ticketDetails.id&&(this.ticketDetails=i,this.ticketDetails$=(0,y.of)(i))}),this.ref.detectChanges()})}get SelfServiceFeedbackQuestionnaire(){return this.themeService.SelfServiceFeedbackQuestionnaire}ngOnInit(){this.otbService.activeTabIndex.subscribe(t=>{this.activeTab=t,this.ref.detectChanges()})}ngOnChanges(t){var i,o,s,r,d,m,c;this.otbService.OTBUserActivated.subscribe(u=>{u&&(this.isAuthorizedUser=!0,this.otbService.last10Tickets(u).subscribe(h=>{this.userTickets$=h.data,this.ref.detectChanges()}))}),t.resetTicket&&t.resetTicket.currentValue&&t.resetTicket.currentValue&&(this.ticketDetails$=(0,y.of)(null),this.resetTicket=!1),t.searchCriteria&&t.searchCriteria.currentValue&&(this.currentCriteria=t.searchCriteria.currentValue,this.search(t.searchCriteria.currentValue),this.showStatusDialog=!1),t.clientTickets&&(this.clientTickets$=(0,y.of)((null===(o=null===(i=null==t?void 0:t.clientTickets)||void 0===i?void 0:i.currentValue)||void 0===o?void 0:o.data)?[...t.clientTickets.currentValue.data]:[]),this.totalSimilarTickets=null===(d=null===(r=null===(s=null==t?void 0:t.clientTickets)||void 0===s?void 0:s.currentValue)||void 0===r?void 0:r.meta)||void 0===d?void 0:d.total,(null===(c=null===(m=t.clientTickets.currentValue)||void 0===m?void 0:m.data)||void 0===c?void 0:c.length)&&(this.tabIndex=1,this.ticketDetails$=(0,y.of)(this.clientTickets.data[0]).pipe((0,C.U)(u=>(u.avg_rate=Math.floor(u.avg_rate),u)),(0,N.b)(u=>{this.replies$=this.ticketService.getTicketReplies(u.id).pipe((0,C.U)(h=>{if(h.data)return h.data.length?h.data:[h.data]}),(0,M.x)(()=>{this.toggleSpinner.emit(!1)}))})))),this.ref.detectChanges()}changePage(t){let i=sessionStorage.getItem("SimilarTickets"),o={};null!=i&&(o=JSON.parse(i),o.page=t.page+1),this.currentPage=t.page+1,this.similarTicketPageCount=t.rows,this.clientTickets$=this.ticketService.getClientTickets(o).pipe((0,C.U)(s=>s.data))}search(t){var i,o,s,r,d;this.toggleSpinner.emit(!0),this.ticketDetails$.subscribe(c=>{this.ticketDetails=c,this.toggleSpinner.emit(!1)}).unsubscribe();let m={ticket_id:null!==(i=null==t?void 0:t.ticket_id)&&void 0!==i?i:null===(o=null==this?void 0:this.ticketDetails)||void 0===o?void 0:o.id,mobile_number:null!==(s=null==t?void 0:t.mobile_number)&&void 0!==s?s:null===(d=null===(r=this.ticketDetails)||void 0===r?void 0:r.client)||void 0===d?void 0:d.mobile};this.ticketDetails$=this.ticketService.searchTickets(m).pipe((0,C.U)(c=>this.currentUser?(c.data.avg_rate=Math.floor(c.data.avg_rate),c.data):(c.avg_rate=Math.floor(c.avg_rate),c)),(0,N.b)(c=>{this.ticketDetails=c,this.replies$=this.ticketService.getTicketReplies(c.id).pipe((0,C.U)(u=>{if(u.data)return u.data.length?u.data.filter(h=>h.sent):[u.data].filter(p=>p.sent)}),(0,M.x)(()=>{this.toggleSpinner.emit(!1)}))}),(0,ce.K)(c=>(this.toggleSpinner.emit(!1),this.toastService.showErrorMessage("TOAST.ERROR.SEARCH.MESSAGE",c.error.errors),(0,y.of)(null))))}download(t){this.amplitudeService.logEvent("SELF_SERVICE_DOWNLOAD_ATTACHMENT"),this.downloadService.downloadFromServer(t)}getFileName(t){const i=t.split("/");return i[i.length-1]}mapValueToLang(t){return`${t}_${this.translateService.currentLang}`}checkRating(t){return!t.feedback_link_expired_at||(new Date).valueOf()<new Date(t.feedback_link_expired_at).valueOf()}submitRating(t){this.amplitudeService.logEvent("SELF_SERVICE_SEND_FEEDBACK"),this.displayRating=!1,t&&this.currentUser&&this.getUserLoggedTickets(),t&&(this.search(this.currentCriteria),this.otbService.last10Tickets(this.otpUser.mobile).subscribe(i=>{this.userTickets$=i.data,this.ref.detectChanges()}))}submitReply(t){this.amplitudeService.logEvent("SELF_SERVICE_SEND_REPLAY"),this.displayReply=!1,this.showStatusDialog=!1,t&&this.currentUser&&this.getUserLoggedTickets(),t&&(this.currentUser||this.search(this.currentCriteria),this.otbService.last10Tickets(this.otpUser.mobile).subscribe(i=>{this.userTickets$=i.data,this.ref.detectChanges()}))}openReplyForm(){this.displayReply=!0}setSelectedTicket(t){this.ticketRate=void 0,this.ticketDetails$=(0,y.of)(t),this.getTicketReplies(t),this.ticketDetails=t,this.showStatusDialog=!1}getTicketReplies(t){this.amplitudeService.logEvent("SELF_SERVICE_GET_TICKET_REPLIES"),this.replies$=this.ticketService.getTicketReplies(t.id).pipe((0,C.U)(i=>{if(i.data)return i.data.length?i.data.filter(o=>o.sent):[i.data].filter(s=>s.sent)}))}resetTicketSearch(){this.resetSearch.emit(!0),this.ticketDetails$=(0,y.of)(null),this.showStatusDialog=!1,this.ticketDetails=null,this.showStatusDialog=!1}resetUserTickets(){this.clientTickets$=(0,y.of)([])}toggleTicketQuestionaire(t){this.displayRating=!1,this.displayReply=!1,t?this.displayRating=!0:this.displayReply=!0}checkFeedback(t){return!(t&&new Date>new Date(t))}userTicketsChangePage(t){const i=document.getElementsByClassName("p-tabview-panel")[0].offsetTop;document.getElementsByClassName("p-tabview-panel")[0].scrollTop=i-50,this.ticketService.getClientTickets({page:t.page+1}).subscribe(o=>{this.userTickets$=o.data,this.currentPage=t.page+1,this.userTicketsTotal=o.meta.total,this.userTicketsCurrentPage=o.meta.current_page,this.ref.detectChanges()})}setActivetab(t){this.activeTab=t.index}showCancelButton(){var t,i;return-1===[11,8,4,3].indexOf(null===(i=null===(t=this.ticketDetails)||void 0===t?void 0:t.status)||void 0===i?void 0:i.main_status_id)}showEscalateButton(){return!(!this.ticketDetails||3!==this.ticketDetails.status.main_status_id&&8!==this.ticketDetails.status.main_status_id||this.ticketDetails.already_escalated)}showCloseButton(){return!(!this.ticketDetails||3!==this.ticketDetails.status.main_status_id&&10!==this.ticketDetails.status.main_status_id&&8!==this.ticketDetails.status.main_status_id)}onClickStatus(t){this.status=t,this.showStatusDialog=!0}showField(t){const i=this.fields.filter(o=>o.field===t)[0];if((null==i?void 0:i.show_on_self_service)&&i.required_if){this.fields.find(s=>s.id===i.constrain_field_id)}return null==i?void 0:i.show_on_self_service}fieldsFilter(t){var i;let s=null===(i=this.fields)||void 0===i?void 0:i.filter(r=>r.field===t)[0];return"ar"===this.lang?null==s?void 0:s.display_name_ar:null==s?void 0:s.display_name_en}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.d),e.Y36(S.sK),e.Y36(Q.D),e.Y36(I.f),e.Y36(e.sBO),e.Y36(D.j),e.Y36(G.Q),e.Y36(de),e.Y36($.Q),e.Y36(_e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-ticket-details"]],inputs:{ticketDetails:"ticketDetails",searchCriteria:"searchCriteria",clientTickets:"clientTickets",resetTicket:"resetTicket",tabIndex:"tabIndex"},outputs:{toggleSpinner:"toggleSpinner",resetSearch:"resetSearch"},features:[e.TTD],decls:6,vars:6,consts:[[1,"row","ticket-info"],[1,"col"],["class","card",4,"ngIf"],["class","col-md-4 col-12",4,"ngIf"],[1,"card"],[1,"card-body","d-flex","flex-column"],[1,"collabsable-header","with-border","w-100"],[1,"text-green"],[1,"box-tools","pull-right"],["data-bs-toggle","collapse","href","#ticketDetailsCollapse",1,"btn"],[1,"fa","fa-minus"],[1,"btn",3,"click"],[1,"fa","fa-times"],["id","ticketDetailsCollapse",1,"container","collapse","show"],[1,"row","round","bordered"],[1,"col-md-3","col-12","mb-2"],[2,"font-weight","bold"],[1,"text-gray"],["class","ticket-status",3,"ngStyle",4,"ngIf","ngIfElse"],["replacment",""],[3,"value","readonly",4,"ngIf"],[1,"col-md-7","col-12","history-info"],[1,"row","w-100"],["class","col-md-3 col-12 p-0 bold-text",4,"ngIf"],["class","col-md-9 col-12 p-0",4,"ngIf"],[1,"col-md-3","col-12","p-0","bold-text"],["class","col-sm-12",4,"ngIf"],["class","btn main-themed pull-right",3,"click",4,"ngIf"],[3,"ticketId","showDialog","ratingSubmitted"],["class","col-md-2 col-12 history-info",4,"ngIf"],[4,"ngIf"],[3,"ticketId","showDialog","replySubmitted"],[3,"ticketId","showDialog","status","replySubmitted"],[1,"ticket-status",3,"ngStyle"],["class","ticket-status ",3,"ngStyle",4,"ngIf"],[3,"value","readonly"],[1,"col-md-9","col-12","p-0"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[1,"btn","main-themed","pull-right",3,"click"],[1,"col-md-2","col-12","history-info"],["class","btn btn-danger mb-2 text-white w-100",3,"click",4,"ngIf"],["class","btn btn-success mb-2 text-white w-100",3,"click",4,"ngIf"],[1,"btn","btn-danger","mb-2","text-white","w-100",3,"click"],[1,"btn","btn-success","mb-2","text-white","w-100",3,"click"],["class","card-header",4,"ngIf"],[1,"card-header"],[1,"card-title","line","text-green"],["class","m-3 row round bordered",4,"ngIf"],[1,"m-3","row","round","bordered"],[1,"row"],[1,"col-6"],[1,"m-0"],[1,"d-flex","justify-content-end"],["class","m-0",4,"ngIf"],[3,"innerHTML"],[1,"alert","alert-info",2,"margin","15px 10px"],[1,"ticket-questionaire"],[1,"main-themed-color"],[1,"col-3"],[3,"ngModel","ngModelOptions","label","value","ngModelChange"],[3,"ngModel","label","ngModelOptions","value","ngModelChange"],[1,"right-float",2,"display","inline-block","margin","0px 10px","color","#b8b8b8","font-size","10px"],[1,"col-md-4","col-12"],[1,"card-body"],["id","self-service-user-tickets",3,"styleClass","activeIndex","onChange","activeIndexChange"],[3,"header",4,"ngIf"],[1,"scroll-tickets",3,"header"],[3,"dir","rows","totalRecords","alwaysShow","onPageChange"],["paginator",""],[3,"header"],["class","text-center mt-2",4,"ngIf"],["class","block-card",3,"click",4,"ngFor","ngForOf"],[1,"block-card",3,"click"],[1,"bold"],["class","ticket-status ",3,"ngStyle",4,"ngIf","ngIfElse"],["replacmentstate",""],[1,"text-center","mt-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,Ii,52,43,"div",2),e.ALo(3,"async"),e.qZA(),e.YNc(4,Yi,11,13,"div",3),e.ALo(5,"async"),e.qZA()),2&t){let o;e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,i.ticketDetails$)),e.xp6(2),e.Q6J("ngIf",i.isAuthorizedUser||(null==(o=e.lcZ(5,4,i.clientTickets$))?null:o.length))}},directives:[f.O5,Mt,zt,ei,f.PC,pe,f.sg,ue.EU,a.JJ,a.On,K.xf,K.x4,me.D,he.Lv],pipes:[f.Ov,S.X$,f.uU],styles:[".ticket-info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:20px}.ticket-info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:#fff}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .row.round[_ngcontent-%COMP%]{padding:.75rem}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .history-info[_ngcontent-%COMP%]{border-right:1px solid #999;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .collabsable-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:.5rem 1rem;margin-bottom:.5rem}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .collabsable-header.with-border[_ngcontent-%COMP%]{border-bottom:1px solid #f4f4f4}.ticket-info[_ngcontent-%COMP%]   .card-body.collapse[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.ticket-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .box-tools[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#97a0b3}.block-card[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #999;display:grid;grid-template-columns:1fr 1fr;margin-bottom:.5rem;border-radius:5px;cursor:pointer}@media (max-width: 768px){.history-info[_ngcontent-%COMP%]{border:unset!important}}.text-gray[_ngcontent-%COMP%]{color:#aaa;font-size:12px}.ticket-status[_ngcontent-%COMP%]{border:1px solid #aaa;padding:1px 10px;font-size:14px;border-radius:8px;box-shadow:0 3px 6px #0003;color:#fff!important;display:inline-block;margin-bottom:10px;text-align:center}.ticket-questionaire[_ngcontent-%COMP%]{padding:.5rem 1rem}  p-tabView .p-tabview-nav-container .p-tabview-nav-content ul li[role=presentation].p-highlight a{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}  p-tabView#self-service-user-tickets p-tabpanel .p-tabview-panel{max-height:250px!important;overflow:scroll!important}#self-service-user-tickets[_ngcontent-%COMP%]   .p-tabview-nav-container[_ngcontent-%COMP%]   .p-tabview-nav-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-color:#f4f4f4!important}#self-service-user-tickets[_ngcontent-%COMP%]   .p-tabview-nav-container[_ngcontent-%COMP%]   .p-tabview-nav-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[role=presentation][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}#self-service-user-tickets[_ngcontent-%COMP%]   .bold-text[_ngcontent-%COMP%]{font-weight:bolder!important}"],changeDetection:0}),n})();var W=g(2618),$i=g(103),Gi=g(7477),q=g(7238),w=g(1818),F=g(6988),Y=g(3819),ve=g(9287),ee=g(9309);function ji(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.label)}}function Ki(n,l){1&n&&e.GkF(0)}const Te=function(n){return{height:n}},zi=function(n,l){return{"p-highlight":n,"p-disabled":l}},Xi=function(n){return{"p-highlight":n}},be=function(n){return{"pi pi-check":n}},H=function(n){return{$implicit:n}},Wi=["container"],en=["filterInput"],tn=["in"];function nn(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.valuesAsString||"empty")}}function on(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"span",17),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).removeChip(s,o)}),e.qZA()}}function ln(n,l){if(1&n&&(e.TgZ(0,"div",13,14),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.YNc(4,on,1,0,"span",16),e.qZA()),2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(3),e.Oqu(i.findLabelByValue(t)),e.xp6(1),e.Q6J("ngIf",!i.disabled)}}function sn(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.placeholder||t.defaultLabel||"empty")}}function an(n,l){if(1&n&&(e.ynx(0),e.YNc(1,ln,5,2,"div",12),e.YNc(2,sn,2,1,"ng-container",7),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value||0===t.value.length)}}function rn(n,l){if(1&n&&(e.ynx(0),e.YNc(1,nn,2,1,"ng-container",7),e.YNc(2,an,3,2,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","comma"===t.display),e.xp6(1),e.Q6J("ngIf","chip"===t.display)}}function cn(n,l){1&n&&e.GkF(0)}function dn(n,l){1&n&&e.GkF(0)}const _n=function(n){return{"p-checkbox-disabled":n}},un=function(n,l,t){return{"p-highlight":n,"p-focus":l,"p-disabled":t}};function pn(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",2),e.TgZ(2,"input",31),e.NdJ("focus",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxFocus()})("blur",function(){return e.CHM(t),e.oxw(3).onHeaderCheckboxBlur()})("keydown.space",function(o){return e.CHM(t),e.oxw(3).toggleAll(o)}),e.qZA(),e.qZA(),e.TgZ(3,"div",32),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).toggleAll(o)}),e._UZ(4,"span",33),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(6,_n,t.disabled||t.toggleAllDisabled)),e.xp6(2),e.Q6J("checked",t.allChecked),e.uIk("disabled",t.disabled||t.toggleAllDisabled),e.xp6(1),e.Q6J("ngClass",e.kEZ(8,un,t.allChecked,t.headerCheckboxFocus,t.disabled||t.toggleAllDisabled)),e.uIk("aria-checked",t.allChecked),e.xp6(1),e.Q6J("ngClass",e.VKq(12,be,t.allChecked))}}function gn(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"input",35,36),e.NdJ("input",function(o){return e.CHM(t),e.oxw(3).onFilterInputChange(o)}),e.qZA(),e._UZ(3,"span",37),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.filterValue||"")("disabled",t.disabled),e.uIk("placeholder",t.filterPlaceHolder)("aria-label",t.ariaFilterLabel)}}function mn(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",24),e.Hsn(1),e.YNc(2,dn,1,0,"ng-container",25),e.YNc(3,pn,5,14,"div",26),e.YNc(4,gn,4,4,"div",27),e.TgZ(5,"button",28),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).close(o)}),e._UZ(6,"span",29),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",t.showToggleAll&&!t.selectionLimit),e.xp6(1),e.Q6J("ngIf",t.filter)}}function hn(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Oqu(i.getOptionGroupLabel(t)||"empty")}}function fn(n,l){1&n&&e.GkF(0)}function vn(n,l){1&n&&e.GkF(0)}function Tn(n,l){if(1&n&&(e.TgZ(0,"li",39),e.YNc(1,hn,2,1,"span",7),e.YNc(2,fn,1,0,"ng-container",8),e.qZA(),e.YNc(3,vn,1,0,"ng-container",8)),2&n){const t=l.$implicit;e.oxw(2);const i=e.MAs(7),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.groupTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",e.VKq(5,H,t)),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(7,H,o.getOptionGroupChildren(t)))}}function bn(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Tn,4,9,"ng-template",38),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.optionsToRender)}}function xn(n,l){1&n&&e.GkF(0)}function Cn(n,l){if(1&n&&(e.ynx(0),e.YNc(1,xn,1,0,"ng-container",8),e.BQk()),2&n){e.oxw();const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,H,i.optionsToRender))}}function kn(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-multiSelectItem",43),e.NdJ("onClick",function(o){return e.CHM(t),e.oxw(4).onOptionClick(o)})("onKeydown",function(o){return e.CHM(t),e.oxw(4).onOptionKeydown(o)}),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(4);e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)}}function Sn(n,l){if(1&n&&(e.ynx(0),e.YNc(1,kn,1,5,"ng-template",38),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Zn(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"p-multiSelectItem",48),e.NdJ("onClick",function(o){return e.CHM(t),e.oxw(5).onOptionClick(o)})("onKeydown",function(o){return e.CHM(t),e.oxw(5).onOptionKeydown(o)}),e.qZA(),e.BQk()}if(2&n){const t=l.$implicit,i=e.oxw(5);e.xp6(1),e.Q6J("option",t)("selected",i.isSelected(t))("label",i.getOptionLabel(t))("disabled",i.isOptionDisabled(t))("template",i.itemTemplate)("itemSize",i.itemSize)}}function yn(n,l){if(1&n&&(e.TgZ(0,"cdk-virtual-scroll-viewport",45,46),e.YNc(2,Zn,2,6,"ng-container",47),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(3,Te,i.scrollHeight))("itemSize",i.itemSize),e.xp6(2),e.Q6J("cdkVirtualForOf",t)}}function An(n,l){if(1&n&&e.YNc(0,yn,3,5,"cdk-virtual-scroll-viewport",44),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.virtualScroll&&!t.emptyOptions)}}function wn(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyFilterMessageLabel," ")}}function Ln(n,l){1&n&&e.GkF(0,null,50)}function Fn(n,l){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,wn,2,1,"ng-container",40),e.YNc(2,Ln,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function In(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function On(n,l){1&n&&e.GkF(0,null,51)}function En(n,l){if(1&n&&(e.TgZ(0,"li",49),e.YNc(1,In,2,1,"ng-container",40),e.YNc(2,On,2,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyTemplate)}}function Mn(n,l){if(1&n&&(e.YNc(0,Sn,2,1,"ng-container",40),e.YNc(1,An,1,1,"ng-template",null,41,e.W1O),e.YNc(3,Fn,3,3,"li",42),e.YNc(4,En,3,3,"li",42)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",!i.virtualScroll)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.hasFilter()&&i.emptyOptions),e.xp6(1),e.Q6J("ngIf",!i.hasFilter()&&i.emptyOptions)}}function Nn(n,l){1&n&&e.GkF(0)}function qn(n,l){if(1&n&&(e.TgZ(0,"div",52),e.Hsn(1,1),e.YNc(2,Nn,1,0,"ng-container",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}const Dn=function(){return["p-multiselect-panel p-component"]},Jn=function(n,l){return{showTransitionParams:n,hideTransitionParams:l}},Un=function(n){return{value:"visible",params:n}},Qn=function(n){return{"p-multiselect-virtualscroll":n}};function Vn(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("@overlayAnimation.start",function(o){return e.CHM(t),e.oxw().onOverlayAnimationStart(o)})("@overlayAnimation.done",function(o){return e.CHM(t),e.oxw().onOverlayAnimationEnd(o)})("keydown",function(o){return e.CHM(t),e.oxw().onKeydown(o)})("click",function(o){return e.CHM(t),e.oxw().onOverlayClick(o)}),e.YNc(1,mn,7,3,"div",19),e.TgZ(2,"div",20),e.TgZ(3,"ul",21),e.YNc(4,bn,2,1,"ng-container",7),e.YNc(5,Cn,2,4,"ng-container",7),e.YNc(6,Mn,5,4,"ng-template",null,22,e.W1O),e.qZA(),e.qZA(),e.YNc(8,qn,3,1,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.Tol(t.panelStyleClass),e.Q6J("ngClass",e.DdM(12,Dn))("@overlayAnimation",e.VKq(16,Un,e.WLB(13,Jn,t.showTransitionOptions,t.hideTransitionOptions)))("ngStyle",t.panelStyle),e.xp6(1),e.Q6J("ngIf",t.showHeader),e.xp6(1),e.Udp("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Qn,t.virtualScroll)),e.xp6(1),e.Q6J("ngIf",t.group),e.xp6(1),e.Q6J("ngIf",!t.group),e.xp6(3),e.Q6J("ngIf",t.footerFacet||t.footerTemplate)}}const Rn=[[["p-header"]],[["p-footer"]]],Bn=function(n,l,t,i){return{"p-multiselect p-component":!0,"p-multiselect-open":n,"p-multiselect-chip":l,"p-focus":t,"p-disabled":i}},Pn=function(n,l){return{"p-placeholder":n,"p-multiselect-label-empty":l}},Yn=function(){return{"p-multiselect-trigger":!0}},Hn=["p-header","p-footer"],$n={provide:a.JU,useExisting:(0,e.Gpc)(()=>xe),multi:!0};let Gn=(()=>{class n{constructor(){this.onClick=new e.vpe,this.onKeydown=new e.vpe}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}onOptionKeydown(t){this.onKeydown.emit({originalEvent:t,option:this.option})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){1&t&&(e.TgZ(0,"li",0),e.NdJ("click",function(s){return i.onOptionClick(s)})("keydown",function(s){return i.onOptionKeydown(s)}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e.qZA(),e.qZA(),e.YNc(4,ji,2,1,"span",4),e.YNc(5,Ki,1,0,"ng-container",5),e.qZA()),2&t&&(e.Q6J("ngStyle",e.VKq(9,Te,i.itemSize+"px"))("ngClass",e.WLB(11,zi,i.selected,i.disabled)),e.uIk("aria-label",i.label)("tabindex",i.disabled?null:"0"),e.xp6(2),e.Q6J("ngClass",e.VKq(14,Xi,i.selected)),e.xp6(1),e.Q6J("ngClass",e.VKq(16,be,i.selected)),e.xp6(1),e.Q6J("ngIf",!i.template),e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.VKq(18,H,i.option)))},directives:[ee.H,f.PC,f.mk,f.O5,f.tP],encapsulation:2}),n})(),xe=(()=>{class n{constructor(t,i,o,s,r,d){this.el=t,this.renderer=i,this.cd=o,this.filterService=s,this.config=r,this.overlayService=d,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.onChange=new e.vpe,this.onFilter=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.onClick=new e.vpe,this.onPanelShow=new e.vpe,this.onPanelHide=new e.vpe,this.scrollHeight="200px",this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(t){this._defaultLabel=t,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(t){this._placeholder=t,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(t){this._options=t,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}ngOnInit(){this.updateLabel()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":this.itemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"selectedItems":this.selectedItemsTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;default:this.itemTemplate=t.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(t){return this.optionLabel?F.gb.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?F.gb.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}getOptionGroupLabel(t){return this.optionGroupLabel?F.gb.resolveFieldData(t,this.optionGroupLabel):null!=t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?F.gb.resolveFieldData(t,this.optionGroupChildren):t.items}isOptionDisabled(t){return(this.optionDisabled?F.gb.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled)||this.maxSelectionLimitReached&&!this.isSelected(t)}writeValue(t){this.value=t,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionClick(t){let i=t.option;if(this.isOptionDisabled(i))return;let o=this.getOptionValue(i),s=this.findSelectionIndex(o);-1!=s?(this.value=this.value.filter((r,d)=>d!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],o]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:t.originalEvent,value:this.value,itemValue:o}),this.updateLabel(),this.updateFilledState()}isSelected(t){return-1!=this.findSelectionIndex(this.getOptionValue(t))}findSelectionIndex(t){let i=-1;if(this.value)for(let o=0;o<this.value.length;o++)if(F.gb.equals(this.value[o],t,this.dataKey)){i=o;break}return i}get toggleAllDisabled(){let t=this.optionsToRender;if(!t||0===t.length)return!0;for(let i of t)if(!this.isOptionDisabled(i))return!1;return!0}toggleAll(t){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateFilledState(),this.updateLabel(),t.preventDefault())}checkAll(){let i=[];this.optionsToRender.forEach(o=>{if(this.group){let s=this.getOptionGroupChildren(o);s&&s.forEach(r=>{let d=this.isOptionDisabled(r);(!d||d&&this.isSelected(r))&&i.push(this.getOptionValue(r))})}else{let s=this.isOptionDisabled(o);(!s||s&&this.isSelected(o))&&i.push(this.getOptionValue(o))}}),this.value=i}uncheckAll(){let i=[];this.optionsToRender.forEach(o=>{this.group?o.items&&o.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&i.push(this.getOptionValue(s))}):this.isOptionDisabled(o)&&this.isSelected(o)&&i.push(this.getOptionValue(o))}),this.value=i}show(){this.overlayVisible||(this.overlayVisible=!0)}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}onOverlayAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,this.appendOverlay(),this.autoZIndex&&F.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(t){switch(t.toState){case"void":F.P9.clear(t.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):w.p.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=w.p.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?w.p.absolutePosition(this.overlay,this.containerViewChild.nativeElement):w.p.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&(this.filterInputChild.nativeElement.value="",this._filterValue=null,this._filteredOptions=null),this.onPanelHide.emit(),this.cd.markForCheck()}close(t){this.hide(),t.preventDefault(),t.stopPropagation()}onMouseclick(t,i){this.disabled||this.readonly||t.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(t),!this.isOverlayClick(t)&&!w.p.hasClass(t.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(i.focus(),this.show())))}removeChip(t,i){this.value=this.value.filter(o=>!F.gb.equals(o,t,this.dataKey)),this.onModelChange(this.value),this.onChange.emit({originalEvent:i,value:this.value}),this.updateLabel(),this.updateFilledState()}isOverlayClick(t){let i=t.target;return!!this.overlay&&(this.overlay.isSameNode(i)||this.overlay.contains(i))}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.el.nativeElement.contains(t.target)||this.isOverlayClick(t))}onInputFocus(t){this.focus=!0,this.onFocus.emit({originalEvent:t})}onInputBlur(t){this.focus=!1,this.onBlur.emit({originalEvent:t}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(t){if(!this.readonly)switch(t.originalEvent.which){case 40:var i=this.findNextItem(t.originalEvent.target.parentElement);i&&i.focus(),t.originalEvent.preventDefault();break;case 38:var o=this.findPrevItem(t.originalEvent.target.parentElement);o&&o.focus(),t.originalEvent.preventDefault();break;case 13:this.onOptionClick(t),t.originalEvent.preventDefault()}}findNextItem(t){let i=t.nextElementSibling;return i?w.p.hasClass(i.children[0],"p-disabled")||w.p.isHidden(i.children[0])||w.p.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(t){let i=t.previousElementSibling;return i?w.p.hasClass(i.children[0],"p-disabled")||w.p.isHidden(i.children[0])||w.p.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}onKeydown(t){switch(t.which){case 40:!this.overlayVisible&&t.altKey&&(this.show(),t.preventDefault());break;case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let t="";for(let i=0;i<this.value.length;i++){let o=this.findLabelByValue(this.value[i]);o&&(t.length>0&&(t+=", "),t+=o)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=t;else{let i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(t){if(this.group){let i=null;for(let o=0;o<this.options.length;o++){let s=this.getOptionGroupChildren(this.options[o]);if(s&&(i=this.searchLabelByValue(t,s),i))break}return i}return this.searchLabelByValue(t,this.options)}searchLabelByValue(t,i){let o=null;for(let s=0;s<i.length;s++){let r=i[s],d=this.getOptionValue(r);if(null==t&&null==d||F.gb.equals(t,d,this.dataKey)){o=this.getOptionLabel(r);break}}return o}get allChecked(){let t=this.optionsToRender;if(!t||0===t.length)return!1;{let i=0,o=0,s=0,r=this.group?0:this.optionsToRender.length;for(let d of t)if(this.group)for(let m of this.getOptionGroupChildren(d)){let c=this.isOptionDisabled(m),u=this.isSelected(m);if(c)u?i++:o++;else{if(!u)return!1;s++}r++}else{let m=this.isOptionDisabled(d),c=this.isSelected(d);if(m)c?i++:o++;else{if(!c)return!1;s++}}return r===i||r===s||s&&r===s+o+i}}get optionsToRender(){return this._filteredOptions||this.options}get emptyOptions(){let t=this.optionsToRender;return!t||0===t.length}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(A.ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(A.ws.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}onFilterInputChange(t){this._filterValue=t.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:t,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let i=(this.optionLabel||"label").split(","),o=[];for(let s of this.options){let r=this.filterService.filter(this.getOptionGroupChildren(s),i,this.filterValue,this.filterMatchMode,this.filterLocale);r&&r.length&&o.push(Object.assign(Object.assign({},s),{[this.optionGroupChildren]:r}))}this._filteredOptions=o}else this._filteredOptions=this.filterService.filter(this.options,t,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{this.isOutsideClicked(i)&&this.hide()}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){w.p.isAndroid()||this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new w.V(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&F.P9.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(A.iZ),e.Y36(A.b4),e.Y36(A.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-multiSelect"]],contentQueries:function(t,i,o){if(1&t&&(e.Suo(o,A.$_,5),e.Suo(o,A.h4,5),e.Suo(o,A.jx,4)),2&t){let s;e.iGM(s=e.CRH())&&(i.footerFacet=s.first),e.iGM(s=e.CRH())&&(i.headerFacet=s.first),e.iGM(s=e.CRH())&&(i.templates=s)}},viewQuery:function(t,i){if(1&t&&(e.Gf(Wi,5),e.Gf(en,5),e.Gf(tn,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.containerViewChild=o.first),e.iGM(o=e.CRH())&&(i.filterInputChild=o.first),e.iGM(o=e.CRH())&&(i.accessibleViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus||i.overlayVisible)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",virtualScroll:"virtualScroll",itemSize:"itemSize",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",scrollHeight:"scrollHeight",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide"},features:[e._Bn([$n])],ngContentSelectors:Hn,decls:12,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["itemslist",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-multiselect-empty-message",4,"ngIf"],[3,"option","selected","label","disabled","template","onClick","onKeydown"],[3,"ngStyle","itemSize",4,"ngIf"],[3,"ngStyle","itemSize"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(t,i){if(1&t){const o=e.EpF();e.F$t(Rn),e.TgZ(0,"div",0,1),e.NdJ("click",function(r){e.CHM(o);const d=e.MAs(4);return i.onMouseclick(r,d)}),e.TgZ(2,"div",2),e.TgZ(3,"input",3,4),e.NdJ("focus",function(r){return i.onInputFocus(r)})("blur",function(r){return i.onInputBlur(r)})("keydown",function(r){return i.onKeydown(r)}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.YNc(7,rn,3,2,"ng-container",7),e.YNc(8,cn,1,0,"ng-container",8),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e._UZ(10,"span",10),e.qZA(),e.YNc(11,Vn,9,20,"div",11),e.qZA()}2&t&&(e.Tol(i.styleClass),e.Q6J("ngClass",e.l5B(21,Bn,i.overlayVisible,"chip"===i.display,i.focus,i.disabled))("ngStyle",i.style),e.xp6(3),e.Q6J("disabled",i.disabled),e.uIk("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("aria-expanded",i.overlayVisible)("aria-labelledby",i.ariaLabelledBy),e.xp6(2),e.Q6J("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),e.xp6(1),e.Q6J("ngClass",e.WLB(26,Pn,i.valuesAsString===(i.defaultLabel||i.placeholder),!(null!=i.valuesAsString&&0!==i.valuesAsString.length||null!=i.placeholder&&0!==i.placeholder.length))),e.xp6(1),e.Q6J("ngIf",!i.selectedItemsTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",e.VKq(29,H,i.value)),e.xp6(1),e.Q6J("ngClass",e.DdM(31,Yn)),e.xp6(1),e.Q6J("ngClass",i.dropdownIcon),e.xp6(1),e.Q6J("ngIf",i.overlayVisible))},directives:[f.mk,f.PC,ve.u,f.O5,f.tP,f.sg,ee.H,Gn,Y.N7,Y.xd,Y.x0],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}"],encapsulation:2,data:{animation:[(0,q.X$)("overlayAnimation",[(0,q.eR)(":enter",[(0,q.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,q.jt)("{{showTransitionParams}}")]),(0,q.eR)(":leave",[(0,q.jt)("{{hideTransitionParams}}",(0,q.oB)({opacity:0}))])])]},changeDetection:0}),n})(),jn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.ez,A.m8,Y.Cl,ve.z,ee.T],A.m8,Y.Cl]}),n})();var Kn=g(6287);function zn(n,l){if(1&n&&(e.TgZ(0,"div",20),e.TgZ(1,"div",3),e.TgZ(2,"h3",21),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",22),e.TgZ(6,"table",23),e.TgZ(7,"tbody"),e.TgZ(8,"tr"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"tr"),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"div",15),e.qZA(),e.qZA(),e.TgZ(20,"tr"),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"td"),e.TgZ(25,"a",24),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"tr"),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,10,"CONTACT_US.TITLE")),e.xp6(7),e.Oqu(e.lcZ(11,12,"CONTACT_US.CODE")),e.xp6(3),e.Oqu(t.themeService.unifiedNumber),e.xp6(3),e.Oqu(e.lcZ(17,14,"CONTACT_US.WORK_TIME")),e.xp6(3),e.Q6J("innerHTML",t.themeService.workingHours,e.oJD),e.xp6(3),e.Oqu(e.lcZ(23,16,"GLOBAL.EMAIL")),e.xp6(3),e.MGl("href","mailto:",t.themeService.publicEmail,"",e.LSH),e.xp6(1),e.Oqu(t.themeService.publicEmail),e.xp6(3),e.Oqu(e.lcZ(30,18,"CONTACT_US.RESPONSE_TIME")),e.xp6(3),e.Oqu(t.themeService.solvingTime)}}function Xn(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("Form",t.ticketForm)("label","GLOBAL.NAME")("inputId","ClientName")("inputType",t.inputType.TEXT)("control",t.getControl("name"))}}function Wn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.OTB_Send")))}function eo(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getOtpCode()}),e.YNc(1,Wn,3,3,"span",14),e._UZ(2,"hollat-spinner",18),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isOTBLoading||!t.getControl("mobile").valid),e.xp6(1),e.Q6J("ngIf",!t.isOTBLoading),e.xp6(1),e.Q6J("showSpinner",t.isOTBLoading)}}function to(n,l){if(1&n&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"code_will_expire_after")," ",t.countDown," ",e.lcZ(3,5,"second")," ")}}function io(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.validate")))}function no(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).verifyOtp()}),e.YNc(1,io,3,3,"span",14),e._UZ(2,"hollat-spinner",18),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("disabled",!t.getControl("OTP_Code").value),e.xp6(1),e.Q6J("ngIf",!t.isOTBLoading),e.xp6(1),e.Q6J("showSpinner",t.isOTBLoading)}}function oo(n,l){if(1&n&&(e.TgZ(0,"div",33),e.TgZ(1,"div",34),e._UZ(2,"input",35),e.qZA(),e.TgZ(3,"div",36),e.YNc(4,no,3,3,"button",37),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.OTP_Enabled)}}function lo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",27),e.YNc(2,eo,3,3,"button",28),e.YNc(3,to,4,7,"div",29),e.YNc(4,oo,5,1,"div",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("mobileValue",t.mobileValue)("disabled",t.mobileVerified)("label","GLOBAL.PHONE_NUMBER")("inputId","phoneNum")("inputType",t.inputType.PHONE)("control",t.getControl("mobile"))("requiredPattern","5XXXXXXXXX"),e.xp6(1),e.Q6J("ngIf",t.OTP_Enabled&&!t.mobileVerified&&!t.countDown),e.xp6(1),e.Q6J("ngIf",t.countDown&&!t.mobileVerified),e.xp6(1),e.Q6J("ngIf",t.countDown&&!t.mobileVerified)}}function so(n,l){if(1&n&&(e._UZ(0,"p-dropdown",43),e.ALo(1,"translate")),2&n){const t=l.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,6,"GLOBAL.CHOOSE"))("disabled",!t.length)}}function ao(n,l){1&n&&e._UZ(0,"hollat-loading-skeleton")}function ro(n,l){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",39),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"sup"),e._UZ(5,"i",40),e.qZA(),e.qZA(),e.YNc(6,so,2,8,"p-dropdown",41),e.ALo(7,"async"),e.YNc(8,ao,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(9),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"GLOBAL.ID.TYPE")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(7,5,i.idTypes$))("ngIfElse",t)}}function co(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",44),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.getControl("national_id_type_id").valid)("label","GLOBAL.ID.NUMBER")("inputId","idNum")("inputType",t.inputType.TEXT)("control",t.getControl("national_id"))("requiredPattern",t.nationalIdRequiredPattern)("placeholder",t.nationalIdRequiredPattern)("fieldType",t.nationalIdFieldType)}}function _o(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"islamic-calendar",45),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!!t.fieldsFilter("id_endDate").required)("label","ar"===t.currentLang?null==(i=t.fieldsFilter("id_endDate"))?null:i.display_name_ar:null==(i=t.fieldsFilter("id_endDate"))?null:i.display_name_en)("hijri",!1)("formControl",t.getControl("id_endDate"))}}function uo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"islamic-calendar",45),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.s9C("label",e.lcZ(2,4,"GLOBAL.BIRTHDATE")),e.Q6J("required",!(null==(i=t.fieldsFilter("birthdate"))||!i.required))("hijri",!1)("formControl",t.getControl("birthdate"))}}function po(n,l){1&n&&(e.ynx(0),e._UZ(1,"i",51),e.BQk())}function go(n,l){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",46),e._uU(2),e.ALo(3,"translate"),e.YNc(4,po,2,0,"ng-container",14),e.qZA(),e.TgZ(5,"div",47),e.TgZ(6,"div",48),e.TgZ(7,"label"),e._UZ(8,"input",49),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",48),e.TgZ(12,"label"),e._UZ(13,"input",50),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,4,"GENDER")," "),e.xp6(2),e.Q6J("ngIf",t.required("gender")),e.xp6(5),e.hij(" ",e.lcZ(10,6,"MALE")," "),e.xp6(5),e.hij(" ",e.lcZ(15,8,"FEMALE")," ")}}function mo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("country_id"))||!i.required))("label","GLOBAL.COUNTRY")("inputId","countryId")("inputType",t.inputType.SELECT)("control",t.getControl("country_id"))("sourceObs$",t.countries$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function ho(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("region_id"))||!i.required))("label","GLOBAL.REGION")("inputId","regionId")("inputType",t.inputType.SELECT)("control",t.getControl("region_id"))("sourceObs$",t.regions$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function fo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("city_id"))||!i.required))("label","GLOBAL.CITY")("inputId","cityId")("inputType",t.inputType.SELECT)("control",t.getControl("city_id"))("sourceObs$",t.cities$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function vo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",53),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("label","ar"==t.currentLang?null==(i=t.fieldsFilter("ticket_type_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("ticket_type_id"))?null:i.display_name_en)("inputId","ticketType")("inputType",t.inputType.SELECT)("control",t.getControl("ticket_type_id"))("sourceObs$",t.ticketTypes$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!(null==(o=t.fieldsFilter("ticket_type_id"))||!o.required))}}const Ce=function(n){return{field:n}};function To(n,l){1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,Ce,e.lcZ(3,4,"GLOBAL.FINE")))," "))}function bo(n,l){1&n&&(e.TgZ(0,"div",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.xi3(2,1,"VALIDATIONS.REQUIRED",e.VKq(6,Ce,e.lcZ(3,4,"GLOBAL.ID.NUMBER")))," "))}function xo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}function Co(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"sup"),e._UZ(5,"i",40),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",54),e._UZ(8,"input",55),e.ALo(9,"translate"),e.YNc(10,To,4,8,"div",56),e.YNc(11,bo,4,8,"div",56),e.qZA(),e.TgZ(12,"div",57),e.TgZ(13,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchViolations()}),e.YNc(14,xo,3,3,"span",14),e._UZ(15,"hollat-spinner",18),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let i,o,s;e.xp6(2),e.hij("",e.lcZ(3,10,"GLOBAL.FINE")," "),e.xp6(6),e.Gre("form-control ",null!=(i=t.ticketForm.get("fine_number"))&&i.touched&&null!=(i=t.ticketForm.get("fine_number"))&&i.dirty&&(null!=(i=t.ticketForm.get("fine_number"))&&i.errors||null==(i=t.ticketForm.get("national_id"))||!i.valid)?"is-invalid":"",""),e.Q6J("placeholder",e.lcZ(9,12,"GLOBAL.FINE")),e.xp6(2),e.Q6J("ngIf",(null==(o=t.ticketForm.get("fine_number"))?null:o.touched)&&(null==(o=t.ticketForm.get("fine_number"))?null:o.dirty)&&(null==(o=t.ticketForm.get("fine_number"))||null==o.errors?null:o.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(s=t.ticketForm.get("fine_number"))?null:s.touched)&&(null==(s=t.ticketForm.get("fine_number"))?null:s.dirty)&&(null==(s=t.ticketForm.get("national_id"))||null==s.errors?null:s.errors.required)),e.xp6(2),e.Q6J("disabled",!t.getControl("fine_number").value||!t.getControl("national_id").value||t.isViolationLoading),e.xp6(1),e.Q6J("ngIf",!t.isViolationLoading),e.xp6(1),e.Q6J("showSpinner",t.isViolationLoading)}}function ko(n,l){if(1&n&&e._UZ(0,"div",60),2&n){const t=l.ngIf,i=e.oxw();e.ekj("text-red",i.violationError),e.Q6J("innerHTML",t,e.oJD)}}function So(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",53),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("label","ar"==t.currentLang?null==(i=t.fieldsFilter("main_reason_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("main_reason_id"))?null:i.display_name_en)("inputId","mainReason")("inputType",t.inputType.SELECT)("control",t.getControl("main_reason_id"))("sourceObs$",t.mainReasons$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!!+(null==(o=t.fieldsFilter("main_reason_id"))?null:o.required))}}function Zo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",61),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("required",!1)("label","GLOBAL.main_reason_other")("inputId","main_reason_other")("inputType",t.inputType.TEXT)("control",t.getControl("main_reason_other"))}}function yo(n,l){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"hollat-generic-input",52),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(1),e.Q6J("required",!(null==(i=t.fieldsFilter("sub_reason_id"))||!i.required))("label","ar"==t.currentLang?null==(o=t.fieldsFilter("sub_reason_id"))?null:o.display_name_ar:null==(o=t.fieldsFilter("sub_reason_id"))?null:o.display_name_en)("inputId","subReason")("inputType",t.inputType.SELECT)("control",t.getControl("sub_reason_id"))("sourceObs$",t.subReasons$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")}}function Ao(n,l){1&n&&(e.TgZ(0,"sup"),e._UZ(1,"i",40),e.qZA())}function wo(n,l){if(1&n&&(e._UZ(0,"p-dropdown",64),e.ALo(1,"translate")),2&n){const t=l.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,5,"GLOBAL.CHOOSE"))}}function Lo(n,l){1&n&&e._UZ(0,"hollat-loading-skeleton")}function Fo(n,l){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",62),e._uU(2),e.YNc(3,Ao,2,0,"sup",14),e.qZA(),e.YNc(4,wo,2,7,"p-dropdown",63),e.ALo(5,"async"),e.YNc(6,Lo,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(7),i=e.oxw();let o,s;e.xp6(2),e.hij(" ","ar"==i.currentLang?null==(o=i.fieldsFilter("sub_sub_reason_id"))?null:o.display_name_ar:null==(o=i.fieldsFilter("sub_sub_reason_id"))?null:o.display_name_en," "),e.xp6(1),e.Q6J("ngIf",!(null==(s=i.fieldsFilter("sub_sub_reason_id"))||!s.required)),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,4,i.subSubReasons))("ngIfElse",t)}}function Io(n,l){1&n&&(e.TgZ(0,"sup"),e._UZ(1,"i",40),e.qZA())}function Oo(n,l){if(1&n&&(e._UZ(0,"p-dropdown",66),e.ALo(1,"translate")),2&n){const t=l.ngIf,i=e.oxw(2);e.s9C("optionLabel",i.getSelectLabel("title_")),e.Q6J("filter",!0)("options",t)("styleClass","w-100")("placeholder",e.lcZ(1,5,"GLOBAL.CHOOSE"))}}function Eo(n,l){1&n&&e._UZ(0,"hollat-loading-skeleton")}function Mo(n,l){if(1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"label",62),e._uU(2),e.YNc(3,Io,2,0,"sup",14),e.qZA(),e.YNc(4,Oo,2,7,"p-dropdown",65),e.ALo(5,"async"),e.YNc(6,Eo,1,0,"ng-template",null,42,e.W1O),e.qZA()),2&n){const t=e.MAs(7),i=e.oxw();let o,s;e.xp6(2),e.hij(" ","ar"==i.currentLang?null==(o=i.fieldsFilter("sub_sub_sub_reason_id"))?null:o.display_name_ar:null==(o=i.fieldsFilter("sub_sub_sub_reason_id"))?null:o.display_name_en," "),e.xp6(1),e.Q6J("ngIf",!(null==(s=i.fieldsFilter("sub_sub_sub_reason_id"))||!s.required)),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,4,i.subSubSubReasons))("ngIfElse",t)}}function No(n,l){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1),e._UZ(2,"hollat-generic-input",67),e.BQk(),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(2),e.Q6J("label","ar"===t.currentLang?null==(i=t.fieldsFilter("hospital_id"))?null:i.display_name_ar:null==(i=t.fieldsFilter("hospital_id"))?null:i.display_name_en)("ignoreTranslation",!0)("inputId","sectors")("inputType",t.inputType.SELECT)("control",t.getControl("hospital_id"))("sourceObs$",t.sectors$)("optionLabel",t.getSelectLabel("title_"))("optionValue","id")("required",!!+(null==(o=t.fieldsFilter("hospital_id"))?null:o.required))}}function qo(n,l){if(1&n&&(e.TgZ(0,"div",25),e.ynx(1),e._UZ(2,"hollat-generic-input",11),e.BQk(),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(2),e.Q6J("label","ar"===t.currentLang?null==(i=t.fieldsFilter("email"))?null:i.display_name_ar:null==(i=t.fieldsFilter("email"))?null:i.display_name_en)("inputId","email")("inputType",t.inputType.TEXT)("control",t.getControl("email"))("required",!!+(null==(o=t.fieldsFilter("email"))?null:o.required))}}function Do(n,l){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.TEXT)("control",i.getControl(t.field))("optionLabel",t.details)}}function Jo(n,l){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.PASSWORD)("control",i.getControl(t.field))("optionLabel",t.details)}}function Uo(n,l){if(1&n&&(e.ynx(0),e._UZ(1,"hollat-generic-input",70),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("required",i.required(t.field))("label","ar"===i.currentLang?t.display_name_ar:t.display_name_en)("inputId",t.field)("inputType",i.inputType.TEXTAREA)("control",i.getControl(t.field))("optionLabel",t.details)}}function Qo(n,l){1&n&&e._UZ(0,"i",40)}const ke=function(){return[]};function Vo(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"label"),e._uU(2),e.YNc(3,Qo,1,0,"i",71),e.qZA(),e._UZ(4,"p-dropdown",72),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(2),e.hij("","ar"===i.currentLang?t.display_name_ar:t.display_name_en," "),e.xp6(1),e.Q6J("ngIf",i.required(t.field)),e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(5,10,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(6,12,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(7,14,"Choose")),e.Q6J("filter",!0)("options",i.customLookups[t.field]?i.customLookups[t.field]:e.DdM(16,ke))("styleClass","w-100")}}function Ro(n,l){if(1&n&&(e.ynx(0),e._UZ(1,"p-multiSelect",72),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();let o;e.xp6(1),e.s9C("emptyFilterMessage",e.lcZ(2,8,"emptyFilterMessage")),e.s9C("emptyMessage",e.lcZ(3,10,"emptyFilterMessage")),e.s9C("formControlName",t.field),e.s9C("optionLabel","ar"===i.currentLang?"title_ar":"title_en"),e.s9C("placeholder",e.lcZ(4,12,"Choose")),e.Q6J("filter",!0)("options",null!==(o=i.customLookups[t.field])&&void 0!==o?o:e.DdM(14,ke))("styleClass","form-control")}}function Bo(n,l){if(1&n&&(e.TgZ(0,"div",69),e.TgZ(1,"div",10),e.YNc(2,Do,2,6,"ng-container",14),e.YNc(3,Jo,2,6,"ng-container",14),e.YNc(4,Uo,2,6,"ng-container",14),e.YNc(5,Vo,8,17,"ng-container",14),e.YNc(6,Ro,5,15,"ng-container",14),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",!t.validation_json||"text"===(null==t.validation_json?null:t.validation_json.type)||"email"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","password"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multipleTextField"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","dropdown"===(null==t.validation_json?null:t.validation_json.type)),e.xp6(1),e.Q6J("ngIf","multiselect"===(null==t.validation_json?null:t.validation_json.type))}}function Po(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Bo,7,5,"div",68),e.BQk()),2&n){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.showField(null==t?null:t.field))}}function Yo(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-multipe-file-upload",73),e.NdJ("onAttachmentsChange",function(o){return e.CHM(t),e.oxw().onAttachmentsChange(o)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"GLOBAL.ATTACHMENTS")),e.xp6(2),e.Q6J("resetFiles",t.resetFiles)}}function Ho(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",74),e.TgZ(1,"input",75),e.NdJ("change",function(o){return e.CHM(t),e.oxw().checkValue(o)}),e.qZA(),e.TgZ(2,"a",76),e.TgZ(3,"label",77),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"sup"),e._UZ(7,"i",40),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.s9C("href",t.themeService.SELF_SERVICE_TERMS_CONTENT,e.LSH),e.xp6(2),e.Oqu(e.lcZ(5,2,"GLOBAL.TERMS"))}}function $o(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-message",79),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf;return e.oxw().emitUserTickets(o)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.s9C("text",e.lcZ(1,1,"GLOBAL.USER_DUPLICATE_TICKETS"))}function Go(n,l){if(1&n&&(e.ynx(0),e.YNc(1,$o,2,3,"p-message",78),e.BQk()),2&n){const t=l.ngIf;e.xp6(1),e.Q6J("ngIf",null==t||null==t.data?null:t.data.length)}}function jo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"GLOBAL.SEND")))}let Ko=(()=>{class n{constructor(t,i,o,s,r,d,m,c,u,h,p){this.configuredFieldsService=t,this.lookupService=i,this.translateService=o,this.defaultsService=s,this.themeService=r,this.ticketService=d,this.otpService=m,this.datePipe=c,this.ref=u,this.toastMessageService=h,this.amplitudeService=p,this.minDateAllowed=new Date("1900-1-1"),this.ticketForm=new a.cw({}),this.countries$=new b.y,this.regions$=new b.y,this.cities$=new b.y,this.ticketTypes$=new b.y,this.ticketTypes=[],this.idTypes$=new b.y,this.mainReasons$=new b.y,this.sectors$=new b.y,this.subReasons$=new b.y,this.userTickets$=new b.y,this.violationContent$=new b.y,this.hospitalField=null,this.birthDateField=null,this.resetFiles=!1,this.customLookups={},this.inputType=J.n,this.isLoading=!1,this.showViolation=!1,this.isViolationLoading=!1,this.nationalIdRequiredPattern="",this.nationalIdFieldType="",this.resetDOB=!1,this.OTP_Enabled=!1,this.isOTBLoading=!1,this.ticketAdded=new e.vpe,this.userTickets=new e.vpe,this.OTP$=new b.y,this.showMainReasonOthers=!1,this.timerInterval$=(0,se.F)(1e3),this.times=60*Number(this.themeService.OTPExpirationTime),this.mobileVerified=!1,this.mobileValue="",this.violationError=!1,this.activeTicketTab=new e.vpe,this.filedsToBeAdded=[],this.subSubReasons=new b.y,this.subSubSubReasons=new b.y,this.showTermsPopup=!1,m.loggedUser.subscribe(v=>{this.currentUser=v}),this.initForm(),this.configuredFieldsService.getConfiguredFields().pipe((0,C.U)(v=>v.fields),(0,C.U)(v=>{this.ticketFields=v,v.forEach(_=>{var x,T,k;if(_.validation_json=_.validation_json?JSON.parse(_.validation_json):_.validation_json,this.ticketForm.controls[_.field]&&_.show_on_self_service)this.ticketForm.get(_.field).setValidators(_.required?a.kI.required:null),this.ticketForm.get(_.field).updateValueAndValidity();else{let Z=[];_.is_migrated&&(_.system_field&&(this.filedsToBeAdded.push(_),this.ticketForm.contains(_.field)||this.ticketForm.addControl(_.field,new a.NI)),_.validation_json&&(Z=this.buildValidations(_.validation_json))),_.required&&_.show_on_self_service&&!!_.is_migrated&&Z.push(a.kI.required),_.is_migrated&&(null===(x=this.ticketForm.get(_.field))||void 0===x||x.setValidators(Z))}("dropdown"===(null===(T=null==_?void 0:_.validation_json)||void 0===T?void 0:T.type)||"multiselect"===(null===(k=null==_?void 0:_.validation_json)||void 0===k?void 0:k.type))&&_.show_on_self_service&&(_.is_system_lookup?this.configuredFieldsService.getSystemOptions(_.system_lookup_id).subscribe(Z=>{this.customLookups[_.field]=Z.data,this.customLookups[_.field].forEach(L=>(L.disabled=!L.active,L.id=`${L.id}`,L)),this.customLookups[_.field]=[...this.customLookups[_.field]]}):this.configuredFieldsService.getNewOptions(_.new_lookup_id).subscribe(Z=>{this.customLookups[_.field]=Z,this.customLookups[_.field].forEach(L=>(L.disabled=!L.active,L.id=`${L.id}`,L)),this.customLookups[_.field]=[...this.customLookups[_.field]]}))})})).subscribe(),this.initForm()}ngOnChanges(t){var i,o;if(t.otpFromSearch.currentValue){let s=t.otpFromSearch.currentValue;this.mobileVerified=s.mobileVerified,this.mobileValue.replace("966",""),this.mobileValue=s.mobile_number,null===(i=this.ticketForm.get("mobile"))||void 0===i||i.patchValue(s.mobile_number),null===(o=this.ticketForm.get("mobile"))||void 0===o||o.updateValueAndValidity(),this.ref.detectChanges()}}get currentLang(){return this.translateService.currentLang}ngOnInit(){this.initLookups(),this.registerFormControlListeners()}initForm(){var t,i,o,s,r,d;this.OTP_Enabled=this.themeService.OTPEnabled,this.ticketForm=new a.cw({ticket_type_id:new a.NI("",[a.kI.required]),main_reason_id:new a.NI("",[a.kI.required]),hospital_id:new a.NI(""),sub_reason_id:new a.NI(""),sub_sub_reason_id:new a.NI(""),sub_sub_sub_reason_id:new a.NI(""),details:new a.NI("",[a.kI.required,a.kI.minLength(this.defaultsService.detailsMinLength),a.kI.maxLength(this.themeService.MIN_CHARS_ON_DETAILS)]),main_reason_other:new a.NI(""),files:new a.NI([]),OTP_Code:new a.NI("")}),this.themeService.SELF_SERVICE_SHOW_TERMS&&this.ticketForm.addControl("terms",new a.NI("",[a.kI.required])),this.ticketForm.addControl("name",new a.NI(null!==(i=null===(t=this.currentUser)||void 0===t?void 0:t.name)&&void 0!==i?i:"",this.currentUser?null:a.kI.required)),this.ticketForm.addControl("national_id_type_id",new a.NI("",this.currentUser?null:a.kI.required)),this.ticketForm.addControl("national_id",new a.NI(null!==(s=null===(o=this.currentUser)||void 0===o?void 0:o.national_id)&&void 0!==s?s:"",this.currentUser?null:a.kI.required)),this.ticketForm.addControl("country_id",new a.NI),this.ticketForm.addControl("region_id",new a.NI),this.ticketForm.addControl("city_id",new a.NI),this.ticketForm.addControl("gender",new a.NI),this.ticketForm.addControl("email",new a.NI),this.ticketForm.addControl("mobile",new a.NI(null!==(d=null===(r=this.currentUser)||void 0===r?void 0:r.mobile)&&void 0!==d?d:"",this.currentUser?null:[a.kI.required])),this.otpService.userInfo.subscribe(m=>{m&&(this.ticketForm.patchValue({birthdate:m.birthdate,national_id_type_id:m.national_id_type_id,national_id:m.national_id,country_id:m.country_id,region_id:m.region_id,city_id:m.city_id,name:m.name,id_endDate:m.id_endDate}),this.ticketForm.updateValueAndValidity(),this.ref.detectChanges())})}initLookups(t){this.ticketForm.reset(),this.ticketForm.markAsUntouched(),this.idTypes$=this.lookupService.getNationalIDTypes().pipe((0,C.U)(i=>i.data)),this.countries$=this.lookupService.getCountries().pipe((0,C.U)(i=>i.data),(0,N.b)(i=>{var o,s;if(!t){const r=i.find(d=>d.is_default);r?null===(o=this.ticketForm.get("country_id"))||void 0===o||o.patchValue(r.id):null===(s=this.ticketForm.get("country_id"))||void 0===s||s.patchValue(i[0].id)}})),this.ticketTypes$=this.lookupService.getTicketTypes().pipe((0,C.U)(i=>i.data),(0,N.b)(i=>{var o,s,r,d;const m=null===(o=i.filter(c=>!!c.default)[0])||void 0===o?void 0:o.id;return this.ticketTypes=i,null===(s=this.ticketForm.get("ticket_type_id"))||void 0===s||s.setValue(m?null===(r=i.filter(c=>!!c.default)[0])||void 0===r?void 0:r.id:null===(d=i[0])||void 0===d?void 0:d.id),i})),this.ticketTypes$.subscribe(),this.regions$=this.lookupService.getRegionsByCountryID(),this.cities$=this.lookupService.getCities()}registerFormControlListeners(){var t,i,o,s,r,d,m;this.fillForm(this.currentUser),null===(t=this.ticketForm.get("national_id_type_id"))||void 0===t||t.valueChanges.subscribe(c=>{var u,h,p;const v=this.themeService.NAFATH_ENABLED?[]:W.NF[c];null===(u=this.ticketForm.get("national_id"))||void 0===u||u.setValidators(v),this.nationalIdRequiredPattern=W.NT[c],this.nationalIdFieldType=W.mE[c],null===(h=this.ticketForm.get("national_id"))||void 0===h||h.updateValueAndValidity(),null===(p=this.ticketForm.get("national_id"))||void 0===p||p.patchValue("")}),null===(i=this.ticketForm.get("country_id"))||void 0===i||i.valueChanges.subscribe(c=>{var u,h;null===(u=this.ticketForm.get("region_id"))||void 0===u||u.reset(),null===(h=this.ticketForm.get("city_id"))||void 0===h||h.reset(),this.regions$=this.lookupService.getRegionsByCountryID(c).pipe()}),null===(o=this.ticketForm.get("region_id"))||void 0===o||o.valueChanges.subscribe(c=>{var u;null===(u=this.ticketForm.get("city_id"))||void 0===u||u.reset(),this.cities$=this.lookupService.getCities(c).pipe()}),this.ticketForm.get("ticket_type_id").valueChanges.subscribe(c=>{var u,h,p,v,_;null===(u=this.ticketForm.get("main_reason_id"))||void 0===u||u.reset(),null===(h=this.ticketForm.get("sub_reason_id"))||void 0===h||h.reset(),null===(p=this.ticketForm.get("hospital_id"))||void 0===p||p.reset(),null===(v=this.ticketForm.get("sub_sub_reason_id"))||void 0===v||v.reset(),null===(_=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===_||_.reset(),this.ref.detectChanges();const x=this.ticketTypes.filter(T=>T.has_integration)[0];x&&(c===x.id?(this.ticketForm.addControl("fine_number",new a.NI("",[a.kI.required])),this.showViolation=!0):(this.ticketForm.removeControl("fine_number"),this.showViolation=!1)),c&&(this.mainReasons$=this.lookupService.getMainReasons(c).pipe())}),this.ticketForm.get("main_reason_id").valueChanges.subscribe(c=>{this.mainReasons$.subscribe(u=>{var h,p,v,_;if(c){const x=u.filter(T=>T.id==c);this.showMainReasonOthers=!!x[0].required_other,null===(h=this.ticketForm.get("sub_reason_id"))||void 0===h||h.reset(),null===(p=this.ticketForm.get("hospital_id"))||void 0===p||p.reset(),null===(v=this.ticketForm.get("sub_sub_reason_id"))||void 0===v||v.reset(),null===(_=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===_||_.reset(),this.ref.detectChanges(),this.getSmimilarTickets(),this.subReasons$=this.lookupService.getSubReasons(c).pipe(),this.sectors$=this.lookupService.getSectors(c).pipe((0,C.U)(T=>T.data),(0,N.b)(T=>{var k;c&&(null===(k=this.ticketForm.get("hospital_id"))||void 0===k||k.patchValue(T[0].id))}))}})}),null===(s=this.ticketForm.get("sub_reason_id"))||void 0===s||s.valueChanges.subscribe(c=>{var u,h;this.getSmimilarTickets(),sessionStorage.setItem("SimilarTickets",JSON.stringify({"main_reason_ids[]":this.ticketForm.value.main_reason_id,"main_sub_reason_ids[]":c,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile})),c&&(this.subSubReasons=this.lookupService.getAllWithoutPaging(c).pipe()),null===(u=this.ticketForm.get("sub_sub_reason_id"))||void 0===u||u.reset(),null===(h=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===h||h.reset()}),null===(r=this.ticketForm.get("sub_sub_reason_id"))||void 0===r||r.valueChanges.subscribe(c=>{var u;c&&(null===(u=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===u||u.reset(),this.subSubSubReasons=this.lookupService.getAllSubSubSubReasonsWithoutPaging(c).pipe())}),null===(d=this.ticketForm.get("national_id"))||void 0===d||d.valueChanges.subscribe(c=>{this.getSmimilarTickets()}),null===(m=this.ticketForm.get("mobile"))||void 0===m||m.valueChanges.subscribe(c=>{this.getSmimilarTickets()})}getSmimilarTickets(){this.currentUser?this.ticketForm.value.main_reason_id&&(this.userTickets$=this.ticketService.getClientTickets({"main_reason_ids[]":this.ticketForm.value.main_reason_id,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile}).pipe((0,C.U)(t=>t))):this.ticketForm.value.national_id&&this.ticketForm.value.mobile&&this.ticketForm.value.main_reason_id&&(this.OTP_Enabled&&this.mobileVerified||!this.OTP_Enabled)&&(this.userTickets$=this.ticketService.getClientTickets({"main_reason_ids[]":this.ticketForm.value.main_reason_id,ticket_type_id:this.ticketForm.value.ticket_type_id,national_id:this.ticketForm.value.national_id,mobile_number:this.ticketForm.value.mobile}).pipe((0,C.U)(t=>t)))}getControl(t){return this.ticketForm.get(t)}getSelectLabel(t){return`${t}${this.currentLang}`}getHospitalDisplayName(){return this.hospitalField[`display_name_${this.currentLang}`]}onAttachmentsChange(t){var i;null===(i=this.ticketForm.get("files"))||void 0===i||i.patchValue([...t])}validateFrom(){return!this.ticketForm.valid||this.isLoading}submitTicket(){this.isLoading=!0;const t=this.cleanObject(this.ticketForm.value);t.birthdate&&(t.birthdate=`${this.datePipe.transform(new Date(t.birthdate),"yyyy-MM-dd")}`);const i=new FormData;Object.keys(t).forEach(o=>{"files"===o?t.files&&t.files.forEach(s=>{i.append("files[]",s)}):(""!=t[o]||null!=t[o])&&i.append(o,t[o])}),this.ticketService.addTicket(i).subscribe(o=>{var s,r,d;this.amplitudeService.logEvent("SELF_SERVICE_ADD_NEW_TICKET"),this.resetAddForm({country_id:t.country_id,region_id:t.region_id,city_id:t.city_id,name:t.name,id_endDate:t.id_endDate,mobile:t.mobile,national_id_type_id:t.national_id_type_id,national_id:t.national_id,birthdate:t.birthdate,email:t.email,ticket_type_id:(null===(s=this.ticketTypes.filter(m=>!!m.default)[0])||void 0===s?void 0:s.id)?null===(r=this.ticketTypes.filter(m=>!!m.default)[0])||void 0===r?void 0:r.id:null===(d=this.ticketTypes[0])||void 0===d?void 0:d.id}),localStorage.setItem("authData",JSON.stringify({mobile:t.mobile,national_id_type_id:t.national_id_type_id,national_id:t.national_id})),this.resetFiles=!0,setTimeout(()=>{this.resetFiles=!1},0),this.isLoading=!1,this.toastMessageService.showSuccessMessage("TOAST.SUCCESS.TICKET_SUBMIT.MESSAGE"),this.ticketAdded.emit({ticket_id:o.id,mobile_number:o.client.mobile}),this.userTickets$=new b.y,this.currentUser&&this.otpService.updateUserTickets.next(o.id)},o=>{this.isLoading=!1,this.toastMessageService.showErrorMessage("TOAST.ERROR.TICKET_SUBMIT.MESSAGE",o.error.errors)})}resetAddForm(t){var i,o,s,r,d;this.amplitudeService.logEvent("SELF_SERVICE_RESET_ADD_TICKET_FORM"),null===(i=this.ticketForm.get("main_reason_id"))||void 0===i||i.reset(),null===(o=this.ticketForm.get("sub_reason_id"))||void 0===o||o.reset(),null===(s=this.ticketForm.get("sub_sub_reason_id"))||void 0===s||s.reset(),null===(r=this.ticketForm.get("sub_sub_sub_reason_id"))||void 0===r||r.reset(),null===(d=this.ticketForm.get("hospital_id"))||void 0===d||d.reset(),this.mainReasons$=(0,y.of)([]),this.sectors$=(0,y.of)([]),this.subReasons$=(0,y.of)([]),this.showMainReasonOthers=!1,this.initLookups(!0),t?this.fillForm(t):this.mobileVerified?(this.ticketForm.reset({mobile:this.otpUserInfo.mobile,name:this.otpUserInfo.name,national_id:this.otpUserInfo.national_id,national_id_type_id:this.otpUserInfo.national_id_type_id}),this.mobileValue=this.otpUserInfo.mobile):(this.ticketForm.reset(),this.ref.detectChanges()),this.ref.detectChanges(),this.resetDOB=!0}emitUserTickets(t){this.userTickets.emit(t),this.amplitudeService.logEvent("SELF_SERVICE_SHOW_SIMILAR_TICKET"),this.otpService.activeTabIndex.next(1),window.scroll({top:0})}searchViolations(){this.violationError=!1,this.isViolationLoading=!0,this.amplitudeService.logEvent("SELF_SERVICE_SEARCH_FOR_VIOLATIONS"),this.violationContent$=this.ticketService.getViolations(this.ticketForm.value.national_id?this.ticketForm.value.national_id:this.currentUser.national_id,this.ticketForm.value.fine_number).pipe((0,C.U)(t=>t.data),(0,ce.K)(t=>(this.isViolationLoading=!1,this.violationError=!0,(0,y.of)(t.error.errors[0][0]))),(0,M.x)(()=>{this.isViolationLoading=!1}))}getOtpCode(){var t;this.isOTBLoading=!0,this.amplitudeService.logEvent("SELF_SERVICE_GET_MOBILE_OTP_CODE"),this.otpService.sendOtp({mobile_number:null===(t=this.ticketForm.get("mobile"))||void 0===t?void 0:t.value,section:"create-ticket"}).pipe((0,C.U)(i=>i.data),(0,M.x)(()=>{this.isOTBLoading=!1})).subscribe(i=>{this.timerInterval$.pipe((0,le.q)(this.times)).subscribe(o=>{this.countDown=this.times-o,1===this.countDown&&(this.countDown=null)})},i=>{this.isOTBLoading=!1,this.toastMessageService.showErrorMessage("error",i.error.errors[0])})}verifyOtp(){var t,i;this.amplitudeService.logEvent("SELF_SERVICE_VERIFY_MOBILE_OTP_CODE"),this.isOTBLoading=!0,this.otpService.verifyOtp({mobile_number:null===(t=this.ticketForm.get("mobile"))||void 0===t?void 0:t.value,otp_code:null===(i=this.ticketForm.get("OTP_Code"))||void 0===i?void 0:i.value}).pipe((0,M.x)(()=>{this.isOTBLoading=!1})).subscribe(o=>{var s;this.otpService.userInfo.next(o.data),localStorage.setItem("auth",o.auth),this.otpUserInfo=o.data,this.otpService.OTBUserActivated.next(null===(s=this.ticketForm.get("mobile"))||void 0===s?void 0:s.value),this.toastMessageService.showSuccessMessage("Mobile_Verified"),this.mobileVerified=!0},o=>{var s;return this.isOTBLoading=!1,null===(s=this.ticketForm.get("OTP_Code"))||void 0===s||s.patchValue(""),this.toastMessageService.showErrorMessage("error",o.error.errors[0]),(0,y.of)(o)})}fillForm(t){var i,o,s,r,d,m;this.ticketForm.reset(),null===(i=this.ticketForm.get("ticket_type_id"))||void 0===i||i.setValue((null===(o=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===o?void 0:o.id)?null===(s=this.ticketTypes.filter(c=>!!c.default)[0])||void 0===s?void 0:s.id:null===(r=this.ticketTypes[0])||void 0===r?void 0:r.id),null===(d=this.ticketForm.get("mobile"))||void 0===d||d.patchValue(null==t?void 0:t.mobile),null===(m=this.ticketForm.get("mobile"))||void 0===m||m.updateValueAndValidity(),this.mobileValue=null==t?void 0:t.mobile,setTimeout(()=>{var c,u,h;t&&this.ticketForm.patchValue({birthdate:t.birthdate,national_id_type_id:t.national_id_type_id,national_id:t.national_id,country_id:t.country_id,region_id:t.region_id,city_id:t.city_id,name:t.name,id_endDate:t.id_endDate,ticket_type_id:(null===(c=this.ticketTypes.filter(p=>!!p.default)[0])||void 0===c?void 0:c.id)?null===(u=this.ticketTypes.filter(p=>!!p.default)[0])||void 0===u?void 0:u.id:null===(h=this.ticketTypes[0])||void 0===h?void 0:h.id,main_reason_id:"",sub_reason_id:"",sub_sub_reason_id:"",sub_sub_sub_reason_id:"",details:"",main_reason_other:"",files:"",OTP_Code:"",email:t.email}),this.ticketForm.updateValueAndValidity(),this.ref.detectChanges()},300),this.ref.detectChanges()}buildValidations(t){const i=[];if(t)switch(t.type){case"email":t.max_length&&i.push(a.kI.maxLength(t.max_length)),t.min_length&&i.push(a.kI.minLength(t.min_length)),i.push(this.EmailValidation);break;case"password":t.max_length&&i.push(a.kI.maxLength(t.max_length)),t.min_length&&i.push(a.kI.minLength(t.min_length)),i.push(this.passwordPattern);break;case"text":case"multipleTextField":t.max_length&&i.push(a.kI.maxLength(t.max_length)),t.min_length&&i.push(a.kI.minLength(t.min_length))}return i}EmailValidation(t){const i=t.value;return!/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(i)&&i?{email:!0}:null}passwordPattern(t){return/(?=(.*[0-9]))(?=.*[\!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{8,}/gm.test(t.value)?null:{notValidPassword:!0}}required(t){var i;return!!this.ticketForm.get(t)&&(null===(i=this.ticketForm.get(t))||void 0===i?void 0:i.hasValidator(a.kI.required))}showField(t){var i,o,s,r,d,m,c,u,h;const p=this.ticketFields.filter(v=>v.field===t)[0];if((null==p?void 0:p.show_on_self_service)&&p.required_if){const v=this.ticketFields.find(_=>_.id===p.constrain_field_id);if(v){const _=null===(i=this.ticketForm.get(v.field))||void 0===i?void 0:i.value,x=[],T=(Z,L)=>{let te=!1;for(let hl of Z)if(te=L.indexOf(hl)>-1,te)break;return te};null===(o=p.constrain_field_option_ids)||void 0===o||o.forEach(Z=>x.push(+Z));const k=p.constrain_field_option_ids.indexOf(_)>-1||_&&_[0]&&T(x,_)||_&&!_[0]&&T(x,[_]);if(k){const Z=this.buildValidations(p.validation_json);p.required_with_constrain&&Z.push(a.kI.required),null===(s=this.ticketForm.get(p.field))||void 0===s||s.setValidators(Z),"color"===p.validation_json.type&&!(null===(r=this.ticketForm.get(p.field))||void 0===r?void 0:r.value)&&(null===(d=this.ticketForm.get(p.field))||void 0===d||d.setValue("#ffffff")),null===(m=this.ticketForm.get(p.field))||void 0===m||m.updateValueAndValidity()}else null===(c=this.ticketForm.get(p.field))||void 0===c||c.clearValidators(),null===(u=this.ticketForm.get(p.field))||void 0===u||u.setValue(null),null===(h=this.ticketForm.get(p.field))||void 0===h||h.updateValueAndValidity();return k}}return null==p?void 0:p.show_on_self_service}cleanObject(t){const i=Object.getOwnPropertyNames(t);for(let o=0;o<i.length;o++){const s=i[o];(""===t[s]||null===t[s]||"null"===t[s]||t[s]==={}||void 0===t[s])&&delete t[s]}return t}fieldsFilter(t){var i;return null===(i=this.ticketFields)||void 0===i?void 0:i.filter(o=>o.field===t)[0]}checkValue(t){var i,o;t.target.checked?null===(i=this.ticketForm.get("terms"))||void 0===i||i.setValue("1"):null===(o=this.ticketForm.get("terms"))||void 0===o||o.setValue(null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_e),e.Y36(oe.W),e.Y36(S.sK),e.Y36(X.p),e.Y36(I.f),e.Y36(U.d),e.Y36(D.j),e.Y36(f.uU),e.Y36(e.sBO),e.Y36(Q.D),e.Y36(G.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-contact-form"]],inputs:{otpFromSearch:"otpFromSearch"},outputs:{ticketAdded:"ticketAdded",userTickets:"userTickets",activeTicketTab:"activeTicketTab"},features:[e.TTD],decls:45,vars:48,consts:[[1,"card","tab-card"],[1,"row","mt-3"],["class","col-md-4",4,"ngIf"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup"],[1,"row"],["class","col-md-6",4,"ngIf"],["class","col-md-12",3,"text-red","innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"label","inputId","inputType","control","required"],["class","col-sm-12",4,"ngIf"],["class","col-sm-12 form-group",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],[1,"col-xs-12","d-flex","justify-content-end"],[1,"btn","btn-success","margin-r-10","mx-1","main-themed",3,"disabled","click"],[3,"showSpinner"],[1,"btn","btn-secondary",3,"click"],[1,"col-md-4"],[1,"card-title","line","main-themed-color"],[1,"card-body","line"],[1,"table","contact-table"],[1,"main-themed-color",3,"href"],[1,"col-md-6"],[3,"Form","label","inputId","inputType","control"],[3,"mobileValue","disabled","label","inputId","inputType","control","requiredPattern"],["type","button","class","btn btn-link float-start mt-1",3,"disabled","click",4,"ngIf"],["class","row p-2",4,"ngIf"],["class","row d-flex justify-content-center align-items-center","style","clear: both",4,"ngIf"],["type","button",1,"btn","btn-link","float-start","mt-1",3,"disabled","click"],[1,"row","p-2"],[1,"row","d-flex","justify-content-center","align-items-center",2,"clear","both"],[1,"col-8"],["placeholder","X X X X X X","id","otp_code","formControlName","OTP_Code",1,"form-control"],[1,"col-4"],["type","button","class","btn w-100 btn-success float-start main-themed mt-1",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","w-100","btn-success","float-start","main-themed","mt-1",3,"disabled","click"],["for","nationalIdType"],[1,"fa","fa-asterisk","required"],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled",4,"ngIf","ngIfElse"],["showSkeleton",""],["formControlName","national_id_type_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder","disabled"],[3,"disabled","label","inputId","inputType","control","requiredPattern","placeholder","fieldType"],["lang","ar",3,"required","label","hijri","formControl"],["for","inputGender",1,"col-sm-4","control-label"],[2,"display","flex","justify-content","space-around"],[1,"radio","radio-inline"],["formControlName","gender","type","radio","value","male"],["formControlName","gender","type","radio","value","female"],[1,"text-red","fa","fa-asterisk","text-xs"],[3,"required","label","inputId","inputType","control","sourceObs$","optionLabel","optionValue"],[3,"label","inputId","inputType","control","sourceObs$","optionLabel","optionValue","required"],[1,"col-md-8","mx-0","ps-md-0"],["id","'fine_number'","formControlName","fine_number",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"col-md-4","justify-content-center"],[1,"btn","btn-success","margin-r-10","main-themed","w-100",3,"disabled","click"],[1,"invalid-feedback"],[1,"col-md-12",3,"innerHTML"],[3,"required","label","inputId","inputType","control"],["for","nationalIdswType"],["formControlName","sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder",4,"ngIf","ngIfElse"],["formControlName","sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder"],["formControlName","sub_sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder",4,"ngIf","ngIfElse"],["formControlName","sub_sub_sub_reason_id","optionValue","id",3,"filter","options","optionLabel","styleClass","placeholder"],[3,"label","ignoreTranslation","inputId","inputType","control","sourceObs$","optionLabel","optionValue","required"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],[3,"required","label","inputId","inputType","control","optionLabel"],["class","fa fa-asterisk required",4,"ngIf"],["optionValue","id","optionDisabled","disabled",3,"emptyFilterMessage","emptyMessage","filter","options","styleClass","formControlName","optionLabel","placeholder"],[3,"resetFiles","onAttachmentsChange"],[1,"col-sm-12","form-group"],["type","checkbox","formControlName","terms",1,"form-check-input",2,"margin-inline-end","10px",3,"change"],["target","_blank",3,"href"],[2,"cursor","pointer"],["closable","false","severity","info",3,"text","click",4,"ngIf"],["closable","false","severity","info",3,"text","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,zn,33,20,"div",2),e.TgZ(3,"div"),e._UZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"form",5),e.TgZ(7,"div",6),e.YNc(8,Xn,2,5,"div",7),e.YNc(9,lo,5,10,"div",7),e.YNc(10,ro,10,7,"div",7),e.YNc(11,co,2,8,"div",7),e.YNc(12,_o,2,4,"div",7),e.YNc(13,uo,3,6,"div",7),e.YNc(14,go,16,10,"div",7),e.YNc(15,mo,2,8,"div",7),e.YNc(16,ho,2,8,"div",7),e.YNc(17,fo,2,8,"div",7),e.YNc(18,vo,2,8,"div",7),e.YNc(19,Co,16,14,"div",7),e.YNc(20,ko,1,3,"div",8),e.ALo(21,"async"),e.YNc(22,So,2,8,"div",7),e.YNc(23,Zo,2,5,"div",7),e.YNc(24,yo,2,8,"div",7),e.YNc(25,Fo,8,6,"div",7),e.YNc(26,Mo,8,6,"div",7),e.YNc(27,No,3,9,"div",7),e.YNc(28,qo,3,5,"div",7),e.YNc(29,Po,2,1,"ng-container",9),e.TgZ(30,"div",10),e._UZ(31,"hollat-generic-input",11),e.qZA(),e.YNc(32,Yo,5,4,"div",12),e.YNc(33,Ho,8,4,"div",13),e.YNc(34,Go,2,1,"ng-container",14),e.ALo(35,"async"),e._UZ(36,"div",15),e.ALo(37,"translate"),e.TgZ(38,"span",16),e.TgZ(39,"button",17),e.NdJ("click",function(){return i.submitTicket()}),e.YNc(40,jo,3,3,"span",14),e._UZ(41,"hollat-spinner",18),e.qZA(),e.TgZ(42,"button",19),e.NdJ("click",function(){return i.resetAddForm()}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let o,s,r,d,m,c,u,h,p,v,_,x,T,k;e.xp6(2),e.Q6J("ngIf",i.themeService.ContactUs_Display),e.xp6(1),e.ekj("col-auto",!i.themeService.ContactUs_Display)("col-md-8",i.themeService.ContactUs_Display),e.xp6(3),e.Q6J("formGroup",i.ticketForm),e.xp6(2),e.Q6J("ngIf",!i.currentUser),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("mobile")),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("national_id_type_id")),e.xp6(1),e.Q6J("ngIf",!i.currentUser&&i.getControl("national_id_type_id")),e.xp6(1),e.Q6J("ngIf",i.getControl("id_endDate")&&(null==(o=i.fieldsFilter("id_endDate"))?null:o.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("birthdate")&&(null==(s=i.fieldsFilter("birthdate"))?null:s.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("gender")&&(null==(r=i.fieldsFilter("gender"))?null:r.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("country_id")&&(null==(d=i.fieldsFilter("country_id"))?null:d.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("region_id")&&(null==(m=i.fieldsFilter("region_id"))?null:m.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("city_id")&&(null==(c=i.fieldsFilter("city_id"))?null:c.show_on_self_service)&&!i.currentUser),e.xp6(1),e.Q6J("ngIf",i.getControl("ticket_type_id")&&(null==(u=i.fieldsFilter("ticket_type_id"))?null:u.show_on_self_service)),e.xp6(1),e.Q6J("ngIf",i.showViolation),e.xp6(1),e.Q6J("ngIf",e.lcZ(21,40,i.violationContent$)),e.xp6(2),e.Q6J("ngIf",null==(h=i.fieldsFilter("main_reason_id"))?null:h.show_on_self_service),e.xp6(1),e.Q6J("ngIf",i.showMainReasonOthers),e.xp6(1),e.Q6J("ngIf",null==(p=i.fieldsFilter("sub_reason_id"))?null:p.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(v=i.fieldsFilter("sub_sub_reason_id"))?null:v.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(_=i.fieldsFilter("sub_sub_sub_reason_id"))?null:_.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(x=i.fieldsFilter("hospital_id"))?null:x.show_on_self_service),e.xp6(1),e.Q6J("ngIf",null==(T=i.fieldsFilter("email"))?null:T.show_on_self_service),e.xp6(1),e.Q6J("ngForOf",i.filedsToBeAdded),e.xp6(2),e.Q6J("label","GLOBAL.DETAILS")("inputId","details")("inputType",i.inputType.TEXTAREA)("control",i.getControl("details"))("required",!!+(null==(k=i.fieldsFilter("details"))?null:k.required)),e.xp6(1),e.Q6J("ngIf",i.themeService.uploadFilesEnabled),e.xp6(1),e.Q6J("ngIf",i.themeService.SELF_SERVICE_SHOW_TERMS),e.xp6(1),e.Q6J("ngIf",e.lcZ(35,42,i.userTickets$)),e.xp6(2),e.Q6J("innerHTML",e.lcZ(37,44,"GLOBAL.REQUIRED_HINT"),e.oJD),e.xp6(3),e.Q6J("disabled",i.validateFrom()),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("showSpinner",i.isLoading),e.xp6(2),e.Oqu(e.lcZ(44,46,"GLOBAL.RESET"))}},directives:[f.O5,a._Y,a.JL,a.sg,f.sg,P.V,E.P,a.Fj,a.JJ,a.u,$i.Lt,Gi.J,ae.Z,a.Q7,a.oH,a._,xe,ge,a.Wl,Kn.q],pipes:[f.Ov,S.X$],styles:[".tab-card[_ngcontent-%COMP%]{background-color:#f7f7f7}.tab-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border:unset;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:transparent}.text-red[_ngcontent-%COMP%]{color:red}[class*=col-][_ngcontent-%COMP%]{margin-bottom:.25rem}p-message[_ngcontent-%COMP%]{cursor:pointer}.contact-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;min-width:100px}"]}),n})(),zo=(()=>{class n{constructor(t){this.httpClient=t}getKnowledgeBase(t,i){return this.httpClient.get(""==i?`${O.N.baseAPIURL}/api/knowledge-base-without-auth?page=${t}`:`${O.N.baseAPIURL}/api/knowledge-base-without-auth?page=${t}&knowledge_base_title=${i}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xo=["paginator"];function Wo(n,l){if(1&n&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Oqu(t[i.getLocalizedTitle("title")])}}function el(n,l){if(1&n&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Oqu(t[i.getLocalizedTitle("title")])}}function tl(n,l){if(1&n&&(e.TgZ(0,"p-accordionTab",22),e.YNc(1,el,2,1,"ng-template",23),e._UZ(2,"span",24),e.qZA()),2&n){const t=l.$implicit,i=e.oxw(4);e.MGl("id","toggle-",t.id,""),e.xp6(2),e.Q6J("innerHTML",t[i.getLocalizedTitle("details")],e.oJD)}}function il(n,l){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,Wo,2,1,"div",18),e.TgZ(2,"p-accordion",19),e.YNc(3,tl,3,2,"p-accordionTab",20),e.qZA(),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.knowledge_bases.length),e.xp6(1),e.Q6J("expandIcon","")("collapseIcon",""),e.xp6(1),e.Q6J("ngForOf",t.knowledge_bases)}}function nl(n,l){if(1&n&&(e.ynx(0),e.YNc(1,il,4,4,"div",16),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t.data)}}function ol(n,l){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,nl,2,1,"ng-container",12),e.qZA()),2&n){const t=l.ngIf;e.oxw();const i=e.MAs(20);e.xp6(1),e.Q6J("ngIf",t.data.length)("ngIfElse",i)}}function ll(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-paginator",26,27),e.NdJ("onPageChange",function(o){return e.CHM(t),e.oxw().changePage(o.page+1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("dir","ltr")("rows",10)("totalRecords",t.totalItems)}}function sl(n,l){1&n&&(e.TgZ(0,"div",4),e.TgZ(1,"div",28),e.TgZ(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"EMPTY_STATE.KNOWLEDGE_BASE")))}function al(n,l){1&n&&(e.TgZ(0,"div",29),e._UZ(1,"hollat-spinner",30),e.qZA()),2&n&&(e.xp6(1),e.Q6J("showSpinner",!0)("spinnerWidth",150)("spinnerHeight",150)("customSpinner",!0))}let rl=(()=>{class n{constructor(t,i,o){this.translateService=t,this.knowledgeBaseService=i,this.amplitudeService=o,this.keyWord="",this.inputType=J.n,this.searchForm=new a.cw({keyword:new a.NI("")}),this.totalItems=0,this.knowledgeBase$=new b.y}ngOnInit(){this.load(1,"")}getControl(t){return this.searchForm.get(t)}search(){this.load(1,this.searchForm.value.keyword)}getLocale(){return this.translateService.currentLang}load(t,i){this.amplitudeService.logEvent("SELF_SERVICE_SHOW_KNOWLEDGE_BASE",{search:i}),this.knowledgeBase$=this.knowledgeBaseService.getKnowledgeBase(t,i).pipe((0,N.b)(o=>{var s;null===(s=this.paginator)||void 0===s||s.changePage(o.meta.current_page),this.totalItems=o.meta.total}))}changePage(t){this.load(t,this.searchForm.value.keyword)}getLocalizedTitle(t){return`${t}_${this.translateService.currentLang}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.sK),e.Y36(zo),e.Y36(G.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["self-service-knowledge-base"]],viewQuery:function(t,i){if(1&t&&e.Gf(Xo,7),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first)}},decls:23,vars:16,consts:[[1,"card","tab-card","bg-gray"],[1,"form-horizontal","pt-3"],[1,"form-group","px-4","py-1"],[1,"col-sm-12"],[1,"row"],[1,"col-md-3","col-12","d-flex","align-items-center"],[1,"m-0","main-themed-color"],[1,"col-md-6","col-9"],[3,"hideLabel","label","inputId","inputType","control"],[1,"col-3"],["type","submit",1,"btn","btn-success","w-100","main-themed",3,"click"],[1,"header-break"],[4,"ngIf","ngIfElse"],[3,"dir","rows","totalRecords","onPageChange",4,"ngIf"],["showEmptyState",""],["loading",""],["class","knBase w-100",4,"ngFor","ngForOf"],[1,"knBase","w-100"],["class","page-header",4,"ngIf"],[3,"expandIcon","collapseIcon"],[3,"id",4,"ngFor","ngForOf"],[1,"page-header"],[3,"id"],["pTemplate","header"],[1,"text-break",3,"innerHTML"],[1,"main-themed-color"],[3,"dir","rows","totalRecords","onPageChange"],["paginator",""],[1,"col-xs-12","no-results","centeralize"],[1,"w-100","d-flex","justify-content-center"],[3,"showSpinner","spinnerWidth","spinnerHeight","customSpinner"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h5",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"hollat-generic-input",8),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return i.search()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"hr",11),e.YNc(16,ol,2,2,"div",12),e.ALo(17,"async"),e.YNc(18,ll,2,3,"p-paginator",13),e.YNc(19,sl,5,3,"ng-template",null,14,e.W1O),e.YNc(21,al,2,4,"ng-template",null,15,e.W1O),e.qZA()),2&t){const o=e.MAs(22);e.xp6(7),e.Oqu(e.lcZ(8,10,"KNOWLEDGE_BASE.SUBTITLE")),e.xp6(3),e.Q6J("hideLabel",!0)("label","GLOBAL.SEARCH")("inputId","keyword")("inputType",i.inputType.TEXT)("control",i.getControl("keyword")),e.xp6(3),e.hij(" ",e.lcZ(14,12,"GLOBAL.SEARCH")," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(17,14,i.knowledgeBase$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",i.totalItems)}},directives:[a._Y,a.JL,a.F,P.V,f.O5,f.sg,j.UQ,j.US,A.jx,me.D,he.Lv,E.P],pipes:[S.X$,f.Ov],styles:[".bg-gray[_ngcontent-%COMP%]{background-color:#f7f7f7}.page-header[_ngcontent-%COMP%]{margin:10px 30px;font-size:18px;border-bottom:none;padding-bottom:10px;color:#000!important}  .p-accordion{padding:0 2rem}  .p-accordion p-accordiontab .p-accordion-tab{margin-bottom:1rem}  .p-accordion p-accordiontab .p-accordion-tab .p-accordion-header .p-accordion-header-link{font-weight:normal;border:unset;background:white}  .p-accordion p-accordiontab .p-accordion-tab .p-accordion-header .p-accordion-header-link:focus{outline:none;box-shadow:none}  .p-accordion p-accordiontab .p-accordion-content{padding-inline:45px}.header-break[_ngcontent-%COMP%]{width:95%;margin:1rem auto}.text-break[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:500px}"]}),n})();function cl(n,l){1&n&&(e.TgZ(0,"p-tabPanel",10),e.ALo(1,"translate"),e._UZ(2,"self-service-knowledge-base"),e.qZA()),2&n&&e.s9C("header",e.lcZ(1,1,"COMMON_QUESTIONS.TITLE"))}function dl(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"self-service-search-box",4),e.NdJ("resetTicketDetails",function(o){return e.CHM(t),e.oxw().resetTicketDetails(o)})("searchTickets",function(o){return e.CHM(t),e.oxw().setSearchCriteria(o)})("updateOtpStatus",function(o){return e.CHM(t),e.oxw().otpStatus(o)}),e.qZA(),e.TgZ(2,"section",5),e.TgZ(3,"div",6),e.TgZ(4,"self-service-ticket-details",7),e.NdJ("toggleSpinner",function(o){return e.CHM(t),e.oxw().toggleSpinner(o)})("resetSearch",function(o){return e.CHM(t),e.oxw().resetSearchbox(o)}),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p-tabView",9),e.TgZ(7,"p-tabPanel",10),e.ALo(8,"translate"),e.TgZ(9,"self-service-contact-form",11),e.NdJ("activeTicketTab",function(o){return e.CHM(t),e.oxw().setActiveTab(o)})("ticketAdded",function(o){return e.CHM(t),e.oxw().setSearchCriteria(o)})("userTickets",function(o){return e.CHM(t),e.oxw().setUserTickets(o)}),e.qZA(),e.qZA(),e.YNc(10,cl,3,3,"p-tabPanel",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("showLoader",t.showLoader)("searchCriteria",t.searchCriteria)("resetSearch",t.resetSearchBox),e.xp6(3),e.Q6J("tabIndex",t.tabIndex)("searchCriteria",t.searchCriteria)("resetTicket",t.resetTicket)("clientTickets",t.userTickets),e.xp6(2),e.Q6J("styleClass","default-font"),e.xp6(1),e.s9C("header",e.lcZ(8,11,"CONTACT_US.COMMUNICATE")),e.xp6(2),e.Q6J("otpFromSearch",t.otpData),e.xp6(1),e.Q6J("ngIf",t.themeService.KB_Display)}}function _l(n,l){1&n&&(e.TgZ(0,"div",13),e._UZ(1,"img",14),e.TgZ(2,"h1",15),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"maintenance"),""))}function ul(n,l){1&n&&e._UZ(0,"div",16)}let Se=(()=>{class n{constructor(t,i,o,s,r,d,m,c){this.themeService=t,this.renderer=i,this.elRef=o,this.otpService=s,this.router=r,this.titleService=d,this.translate=m,this.cacheService=c,this.showLoader=!1,this.userTickets=[],this.resetSearchBox=!1,this.resetTicket=!1,this.tabIndex=0;const u=c.getItem("userData");u&&this.otpService.loggedUser.next(u),(0,Ze.aj)(this.themeService.selfServiceConfigs,this.otpService.loggedUser).subscribe(h=>{var p,v,_,x,T,k;+h[0].LOGIN.SELFSERVICE_LOGIN_ENABLED.value?u||this.router.navigate(["/login"]):this.otpService.loggedUser.next(null),this.titleService.setTitle("ar"===this.translate.currentLang?null===(_=null===(v=null===(p=h[0])||void 0===p?void 0:p.CLIENT_DETAILS)||void 0===v?void 0:v.CLIENT_NAME_AR)||void 0===_?void 0:_.value:null===(k=null===(T=null===(x=h[0])||void 0===x?void 0:x.CLIENT_DETAILS)||void 0===T?void 0:T.CLIENT_NAME)||void 0===k?void 0:k.value)})}ngOnInit(){this.themeService.selfServiceConfigs.subscribe(t=>{this.selfServiceConfig=t})}ngAfterViewInit(){this.themeService.ChatBot_enabled&&this.loadChatBot()}loadChatBot(){const t=this.themeService.ChatBotScript;let i=document.createElement("script");i.src=t,i.type="text/javascript",i.async=!0,document.getElementById("chatbotDiv").appendChild(i)}toggleSpinner(t){this.showLoader=t}resetSearchbox(t){this.resetSearchBox=t}resetTicketDetails(t){this.resetTicket=t}setSearchCriteria(t){this.searchCriteria=Object.assign({},t)}setUserTickets(t){this.userTickets=t}otpStatus(t){this.otpData=t}setActiveTab(t){this.tabIndex=+t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.f),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(D.j),e.Y36(R.F0),e.Y36(ne.Dx),e.Y36(S.sK),e.Y36($.Q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-self-service"]],decls:4,vars:3,consts:[["class","self-service-container",4,"ngIf"],["style","text-align: center",4,"ngIf"],["id","chatbotDiv",4,"ngIf"],[1,"self-service-container"],[3,"showLoader","searchCriteria","resetSearch","resetTicketDetails","searchTickets","updateOtpStatus"],[1,"content",2,"margin-top","50px"],[1,"container"],[3,"tabIndex","searchCriteria","resetTicket","clientTickets","toggleSpinner","resetSearch"],[1,"row","mt-3"],["id","self-service-tab",3,"styleClass"],[3,"header"],[3,"otpFromSearch","activeTicketTab","ticketAdded","userTickets"],[3,"header",4,"ngIf"],[2,"text-align","center"],["src","assets/maintenance.jpg","alt","","width","500px",2,"margin","20px auto"],[1,"text-green",2,"text-align","center","margin-bottom","35px"],["id","chatbotDiv"]],template:function(t,i){1&t&&(e.YNc(0,dl,11,13,"div",0),e.YNc(1,_l,5,3,"div",1),e._UZ(2,"self-service-footer"),e.YNc(3,ul,1,0,"div",2)),2&t&&(e.Q6J("ngIf",!i.themeService.MAINTENANCE_MODE),e.xp6(1),e.Q6J("ngIf",i.themeService.MAINTENANCE_MODE),e.xp6(2),e.Q6J("ngIf",i.themeService.ChatBot_enabled))},directives:[f.O5,Ee,ft,Hi,K.xf,K.x4,Ko,rl],pipes:[S.X$],styles:[".self-service-container{width:100%;background-size:cover;background-position:center;border-radius:0 0 25px 25px}.self-service-container self-service-header{width:100%;margin-bottom:30px}.self-service-container .ticket-info .card{border-radius:20px}.self-service-container .ticket-info .card .card-header{display:flex;flex-direction:row;justify-content:space-between;border-radius:20px;border-bottom:1px solid #f4f4f4;background-color:#fff}.self-service-container .ticket-info .card-body{padding:.5rem}.self-service-container .ticket-info .card-body .row.round{padding:.75rem}.self-service-container .ticket-info .card-body .history-info{border-right:1px solid #999;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end}.self-service-container .ticket-info .card-body .history-info .history-info-details{display:grid;grid-template-columns:1fr 3fr;grid-column-gap:.25rem;column-gap:.25rem;grid-template-rows:4}#self-service-tab .p-tabview-nav-container .p-tabview-nav-content ul{border-color:#f4f4f4!important}#self-service-tab .p-tabview-nav-container .p-tabview-nav-content ul li[role=presentation] a{border-top-left-radius:20px;border-top-right-radius:20px;background-color:#f4f4f4;color:#000;border-color:#f4f4f4!important}@media (max-width: 768px){.history-info{border:unset}.content{margin-top:75px}}\n"],encapsulation:2}),n})();const pl=[{path:"",component:Se,children:[{path:":mobile",component:Se}]}];var gl=g(1459);let ml=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[gl.m,R.Bz.forChild(pl),jn]]}),n})()}}]);